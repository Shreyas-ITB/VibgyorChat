@tailwind base;
@tailwind components;
@tailwind utilities;

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --bg-primary: #000000;
  --bg-secondary: #0a0a0a;
  --bg-tertiary: #141414;
  --text-primary: #ffffff;
  --text-secondary: #a0a0a0;
  --text-tertiary: #666666;
  --border-color: #1f1f1f;
  --success-color: #22c55e;
  --error-color: #ef4444;
  --hover-bg: #1a1a1a;
}

[data-theme="light"] {
  --bg-primary: #ffffff;
  --bg-secondary: #f5f5f5;
  --bg-tertiary: #ebebeb;
  --text-primary: #000000;
  --text-secondary: #5f5f5f;
  --text-tertiary: #999999;
  --border-color: #e0e0e0;
  --success-color: #16a34a;
  --error-color: #dc2626;
  --hover-bg: #e5e5e5;
}

/* Light theme specific overrides */
[data-theme="light"] .mosaic-particle {
  background: var(--text-tertiary);
  opacity: 0.08;
}

[data-theme="light"] .custom-scrollbar::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.05);
}

[data-theme="light"] .custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
}

/* Imported Group Media Hiding */
.imported-group-chat .image-attachment,
.imported-group-chat .file-attachment,
.imported-group-chat [ng-if*="message.type === 'image'"],
.imported-group-chat [ng-if*="message.type === 'file'"],
.imported-group-chat [ng-if*="message.imageUrl"],
.imported-group-chat [ng-if*="message.file_name"] {
  display: none !important;
}

/* Hide entire messages that contain only media content in imported groups */
.imported-group-chat .message-container:has(.image-attachment),
.imported-group-chat .message-container:has(.file-attachment),
.imported-group-chat .message-item:has([ng-if*="message.type === 'image'"]),
.imported-group-chat .message-item:has([ng-if*="message.type === 'file'"]) {
  display: none !important;
}

/* Hide messages that only contain media and no text content */
.imported-group-chat .message-content:has(.image-attachment):not(:has(.text-content)),
.imported-group-chat .message-content:has(.file-attachment):not(:has(.text-content)) {
  display: none !important;
}

.imported-group-media-placeholder {
  background-color: rgba(107, 114, 128, 0.1);
  border: 1px solid rgba(107, 114, 128, 0.3);
  border-radius: 8px;
  padding: 12px;
  margin-top: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
  color: rgba(156, 163, 175, 1);
}

.imported-group-media-placeholder svg {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
}

.imported-group-media-placeholder span {
  font-size: 14px;
}

[data-theme="light"] .custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

[data-theme="light"] .scrollbar-thin {
  scrollbar-color: rgba(0, 0, 0, 0.2) rgba(0, 0, 0, 0.05);
}

[data-theme="light"] .scrollbar-thin::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.05);
}

[data-theme="light"] .scrollbar-thin::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
}

[data-theme="light"] .scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

[data-theme="light"] .discord-message:hover {
  background-color: rgba(0, 0, 0, 0.03);
}

[data-theme="light"] .discord-message .hover-actions {
  background: #f0f0f0;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

[data-theme="light"] .discord-message .hover-action-btn {
  color: rgba(0, 0, 0, 0.6);
}

[data-theme="light"] .discord-message .hover-action-btn:hover {
  background-color: rgba(0, 0, 0, 0.1) !important;
  color: rgba(0, 0, 0, 1) !important;
}

[data-theme="light"] .discord-message .hover-action-btn:active {
  background-color: rgba(0, 0, 0, 0.15) !important;
}

[data-theme="light"] .mention.user-mention {
  background-color: rgba(0, 0, 0, 0.1);
  color: #000000;
  border: 1px solid rgba(0, 0, 0, 0.2);
}

[data-theme="light"] .mobile-connection-status {
  background-color: #ffffff;
  border: 1px solid var(--border-color);
}

/* Light theme text fixes */
[data-theme="light"] .text-white {
  color: var(--text-primary) !important;
}

[data-theme="light"] .text-gray-400 {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .text-gray-300 {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .text-gray-500 {
  color: var(--text-tertiary) !important;
}

[data-theme="light"] .text-gray-600 {
  color: var(--text-tertiary) !important;
}

[data-theme="light"] .text-gray-700 {
  color: var(--text-secondary) !important;
}

/* Light theme background fixes */
[data-theme="light"] .bg-black {
  background-color: var(--bg-primary) !important;
}

[data-theme="light"] .bg-gray-800 {
  background-color: var(--bg-tertiary) !important;
}

[data-theme="light"] .bg-gray-900 {
  background-color: var(--bg-secondary) !important;
}

[data-theme="light"] .bg-gray-700 {
  background-color: var(--hover-bg) !important;
}

/* Light theme border fixes */
[data-theme="light"] .border-gray-700 {
  border-color: var(--border-color) !important;
}

[data-theme="light"] .border-gray-600 {
  border-color: var(--border-color) !important;
}

/* Light theme hover fixes */
[data-theme="light"] .hover\:bg-gray-800:hover {
  background-color: var(--hover-bg) !important;
}

[data-theme="light"] .hover\:bg-gray-700:hover {
  background-color: var(--hover-bg) !important;
}

[data-theme="light"] .hover\:text-white:hover {
  color: var(--text-primary) !important;
}

/* Light theme search input */
[data-theme="light"] input[type="text"],
[data-theme="light"] input[type="email"],
[data-theme="light"] textarea {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-color) !important;
}

[data-theme="light"] input::placeholder,
[data-theme="light"] textarea::placeholder {
  color: var(--text-tertiary) !important;
}

/* Light theme buttons */
[data-theme="light"] button {
  color: var(--text-primary);
}

[data-theme="light"] .btn-secondary {
  background-color: var(--bg-tertiary);
  color: var(--text-primary);
  border-color: var(--border-color);
}

/* Light theme filter tabs */
[data-theme="light"] .filter-tab {
  color: var(--text-secondary);
}

[data-theme="light"] .filter-tab.active {
  color: var(--text-primary);
}

/* Light theme welcome message */
[data-theme="light"] .welcome-container h2 {
  color: var(--text-primary) !important;
}

[data-theme="light"] .welcome-container p {
  color: var(--text-secondary) !important;
}

/* Light theme settings panel */
[data-theme="light"] .settings-panel h3,
[data-theme="light"] .settings-panel h4 {
  color: var(--text-primary) !important;
}

[data-theme="light"] .settings-panel label {
  color: var(--text-secondary) !important;
}

/* Light theme dropdown */
[data-theme="light"] .dropdown-menu {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
}

[data-theme="light"] .dropdown-item {
  color: var(--text-primary) !important;
}

[data-theme="light"] .dropdown-item:hover {
  background-color: var(--hover-bg) !important;
}

/* Light theme comprehensive fixes */
[data-theme="light"] h1,
[data-theme="light"] h2,
[data-theme="light"] h3,
[data-theme="light"] h4,
[data-theme="light"] h5,
[data-theme="light"] h6 {
  color: var(--text-primary) !important;
}

[data-theme="light"] p,
[data-theme="light"] span,
[data-theme="light"] div {
  color: inherit;
}

/* Light theme navigation */
[data-theme="light"] nav {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
}

/* Light theme sidebar */
[data-theme="light"] .desktop-sidebar {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
}

/* Light theme left navigation */
[data-theme="light"] .left-nav-bar {
  background-color: var(--bg-primary) !important;
  border-color: var(--border-color) !important;
}

/* Light theme buttons with specific colors */
[data-theme="light"] .text-white {
  color: var(--text-primary) !important;
}

[data-theme="light"] .text-gray-300,
[data-theme="light"] .text-gray-400,
[data-theme="light"] .text-gray-500 {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .text-gray-600,
[data-theme="light"] .text-gray-700 {
  color: var(--text-tertiary) !important;
}

/* Light theme specific element fixes */
[data-theme="light"] .bg-gray-800,
[data-theme="light"] .bg-gray-900 {
  background-color: var(--bg-tertiary) !important;
}

[data-theme="light"] .bg-gray-700 {
  background-color: var(--hover-bg) !important;
}

[data-theme="light"] .hover\:bg-gray-700:hover,
[data-theme="light"] .hover\:bg-gray-800:hover {
  background-color: var(--hover-bg) !important;
}

/* Light theme borders */
[data-theme="light"] .border-gray-600,
[data-theme="light"] .border-gray-700 {
  border-color: var(--border-color) !important;
}

/* Light theme theme dropdown specific fixes */
[data-theme="light"] .settings-panel .dropdown-menu {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
}

[data-theme="light"] .settings-panel .dropdown-item {
  color: var(--text-primary) !important;
}

[data-theme="light"] .settings-panel .dropdown-item:hover {
  background-color: var(--hover-bg) !important;
}

/* Light theme profile popup */
[data-theme="light"] .profile-popup {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
}

/* Light theme search input and form elements */
[data-theme="light"] input,
[data-theme="light"] textarea,
[data-theme="light"] select {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-color) !important;
}

[data-theme="light"] input::placeholder,
[data-theme="light"] textarea::placeholder {
  color: var(--text-tertiary) !important;
}

/* Light theme contact cards and lists */
[data-theme="light"] .contact-card,
[data-theme="light"] .group-card {
  background-color: transparent !important;
  border-color: var(--border-color) !important;
}

[data-theme="light"] .contact-card:hover,
[data-theme="light"] .group-card:hover {
  background-color: var(--hover-bg) !important;
}

/* Light theme message area */
[data-theme="light"] .messages-area {
  background-color: var(--bg-primary) !important;
}

/* Light theme input area */
[data-theme="light"] .input-area {
  background-color: var(--bg-primary) !important;
  border-color: var(--border-color) !important;
}

/* Light theme welcome message */
[data-theme="light"] .welcome-message {
  color: var(--text-primary) !important;
}

/* Light theme loading states */
[data-theme="light"] .loading-spinner {
  border-color: var(--text-tertiary) !important;
  border-top-color: var(--text-primary) !important;
}

/* Light theme scrollbars */
[data-theme="light"] .custom-scrollbar::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.05) !important;
}

[data-theme="light"] .custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2) !important;
}

[data-theme="light"] .custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3) !important;
}

/* Light theme filter tabs */
[data-theme="light"] .filter-tab {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .filter-tab.active {
  color: var(--bg-primary) !important;
}

/* Light theme search results */
[data-theme="light"] .search-result-item {
  background-color: var(--bg-tertiary) !important;
  border-color: var(--border-color) !important;
}

[data-theme="light"] .search-result-item:hover {
  background-color: var(--hover-bg) !important;
}

/* Light theme connection status */
[data-theme="light"] .connection-status {
  background-color: var(--bg-primary) !important;
  color: #22c55e !important;
  border-color: var(--border-color) !important;
}

/* Light theme mobile connection status */
[data-theme="light"] .mobile-connection-status {
  background-color: var(--bg-primary) !important;
  color: #22c55e !important;
  border-color: var(--border-color) !important;
}

/* Light theme connection status pill - specific fix */
[data-theme="light"] .backdrop-blur-sm {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
}

[data-theme="light"] .backdrop-blur-sm .text-green-400,
[data-theme="light"] .backdrop-blur-sm .text-red-400 {
  color: inherit !important;
}

/* Light theme profile button specific fix */
[data-theme="light"] button[style*="background-color: #000000"] {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Light theme filter tabs container fix */
[data-theme="light"] .rounded-lg[style*="background-color: #000000"] {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Light theme filter tab background animation fix */
[data-theme="light"] .absolute[style*="background-color: var(--text-primary)"] {
  background-color: var(--text-primary) !important;
}

/* Light theme message input area fix */
[data-theme="light"] .input-area,
[data-theme="light"] .message-input-container {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
}

[data-theme="light"] .message-input,
[data-theme="light"] textarea[placeholder*="message"] {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-color) !important;
}

/* Light theme comprehensive text color fixes */
[data-theme="light"] * {
  /* Reset any hardcoded white text to use theme variables */
}

[data-theme="light"] .text-white,
[data-theme="light"] [style*="color: white"],
[data-theme="light"] [style*="color: #ffffff"],
[data-theme="light"] [style*="color: #fff"] {
  color: var(--text-primary) !important;
}

/* Light theme app title and headers */
[data-theme="light"] .mobile-app-title,
[data-theme="light"] .app-title {
  color: var(--text-primary) !important;
}

/* Light theme navigation items */
[data-theme="light"] .nav-item {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .nav-item.active {
  color: var(--bg-primary) !important;
}

/* Light theme contact names and info */
[data-theme="light"] .contact-name,
[data-theme="light"] .group-name {
  color: var(--text-primary) !important;
}

[data-theme="light"] .contact-message,
[data-theme="light"] .contact-status {
  color: var(--text-secondary) !important;
}

/* Light theme settings panel specific fixes */
[data-theme="light"] .settings-panel {
  background-color: var(--bg-secondary) !important;
}

[data-theme="light"] .settings-panel h3,
[data-theme="light"] .settings-panel h4 {
  color: var(--text-primary) !important;
}

[data-theme="light"] .settings-panel label {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .settings-panel button {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-color) !important;
}

[data-theme="light"] .settings-panel button:hover {
  background-color: var(--hover-bg) !important;
}

/* Light theme theme dropdown items */
[data-theme="light"] .theme-dropdown-item {
  color: var(--text-primary) !important;
}

[data-theme="light"] .theme-dropdown-item:hover {
  background-color: var(--hover-bg) !important;
}

[data-theme="light"] .theme-dropdown-item .text-gray-400 {
  color: var(--text-tertiary) !important;
}

/* Light theme coming soon section */
[data-theme="light"] .coming-soon-item {
  color: var(--text-secondary) !important;
}

/* Light theme profile button */
[data-theme="light"] .profile-button {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

/* Light theme search section */
[data-theme="light"] .search-section {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
}

/* Light theme filter section */
[data-theme="light"] .filter-section {
  background-color: var(--bg-primary) !important;
}

/* Light theme animated background for filters */
[data-theme="light"] .filter-background {
  background-color: var(--text-primary) !important;
}

/* Light theme contact list */
[data-theme="light"] .contacts-list {
  background-color: transparent !important;
}

/* Light theme loading state */
[data-theme="light"] .loading-text {
  color: var(--text-secondary) !important;
}

/* Light theme search results */
[data-theme="light"] .search-results {
  background-color: var(--bg-secondary) !important;
}

[data-theme="light"] .search-results h3 {
  color: var(--text-primary) !important;
}

/* Light theme no results message */
[data-theme="light"] .no-results {
  color: var(--text-secondary) !important;
}

/* Light theme archived folder */
[data-theme="light"] .archived-folder {
  background-color: var(--bg-tertiary) !important;
  border-color: var(--border-color) !important;
}

[data-theme="light"] .archived-folder:hover {
  background-color: var(--hover-bg) !important;
}

/* Light theme sidebar headers */
[data-theme="light"] .sidebar-header {
  color: var(--text-primary) !important;
}

/* Light theme header and navigation specific fixes */
[data-theme="light"] nav[style*="background-color: var(--bg-secondary)"] {
  background-color: var(--bg-secondary) !important;
  border-bottom: 1px solid var(--border-color) !important;
}

/* Light theme sidebar specific fixes */
[data-theme="light"] .desktop-sidebar[style*="background-color: var(--bg-secondary)"] {
  background-color: var(--bg-secondary) !important;
  border-right: 1px solid var(--border-color) !important;
}

/* Light theme left navigation bar fix */
[data-theme="light"] .left-nav-bar[style*="background-color: #000000"] {
  background-color: var(--bg-primary) !important;
  border-right: 1px solid var(--border-color) !important;
}

/* Light theme search section fix */
[data-theme="light"] .border-b[style*="border-color: var(--border-color)"] {
  border-color: var(--border-color) !important;
}

/* Light theme input focus states */
[data-theme="light"] input:focus,
[data-theme="light"] textarea:focus {
  border-color: var(--text-primary) !important;
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1) !important;
}

/* Light theme button hover states */
[data-theme="light"] button:hover {
  opacity: 0.8;
}

/* Light theme specific element targeting */
[data-theme="light"] .w-12.h-12.rounded-xl {
  border: 1px solid transparent;
}

[data-theme="light"] .w-12.h-12.rounded-xl:hover {
  border-color: var(--border-color) !important;
}

/* Light theme message area background */
[data-theme="light"] .messages-area,
[data-theme="light"] .chat-interface {
  background-color: var(--bg-primary) !important;
}

/* Light theme welcome message area */
[data-theme="light"] .welcome-container {
  background-color: var(--bg-primary) !important;
}

/* Light theme contact list items */
[data-theme="light"] .contact-item,
[data-theme="light"] .group-item {
  border-bottom: 1px solid var(--border-color) !important;
}

[data-theme="light"] .contact-item:hover,
[data-theme="light"] .group-item:hover {
  background-color: var(--hover-bg) !important;
}

/* Light theme very specific element fixes based on screenshot */

/* Connection status pill in header */
[data-theme="light"] .backdrop-blur-sm.rounded-full.px-3.py-1\.5 {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
  color: var(--text-primary) !important;
}

/* Profile button in header */
[data-theme="light"] .rounded-full.px-4.py-2[style*="background-color: #000000"] {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Filter tabs container */
[data-theme="light"] .flex.space-x-1.rounded-lg.p-1.relative[style*="background-color: #000000"] {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Filter tab buttons */
[data-theme="light"] .flex-1.px-1\.5.py-2.rounded-md.text-xs {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .flex-1.px-1\.5.py-2.rounded-md.text-xs[ng-style*="color: var(--bg-primary)"] {
  color: var(--bg-primary) !important;
}

/* Message input container at bottom */
[data-theme="light"] .fixed.bottom-0.left-0.right-0 {
  background-color: var(--bg-secondary) !important;
  border-top: 1px solid var(--border-color) !important;
}

/* Message input field */
[data-theme="light"] textarea[placeholder*="Type your message"] {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Search input field */
[data-theme="light"] input[placeholder*="Search users"] {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Contact cards in sidebar */
[data-theme="light"] .p-4.rounded-xl.cursor-pointer {
  background-color: transparent !important;
  border: 1px solid transparent !important;
}

[data-theme="light"] .p-4.rounded-xl.cursor-pointer:hover {
  background-color: var(--hover-bg) !important;
  border-color: var(--border-color) !important;
}

/* Selected contact highlighting */
[data-theme="light"] .p-4.rounded-xl.cursor-pointer[ng-style*="background-color: rgba(255, 255, 255, 0.1)"] {
  background-color: var(--hover-bg) !important;
  border-color: var(--text-primary) !important;
}

/* Status indicators - keep original colors but ensure visibility */
[data-theme="light"] .bg-green-500 {
  background-color: #22c55e !important;
}

[data-theme="light"] .bg-red-500 {
  background-color: #ef4444 !important;
}

[data-theme="light"] .text-green-400 {
  color: #22c55e !important;
}

[data-theme="light"] .text-red-400 {
  color: #ef4444 !important;
}

/* Ensure all text in overridden black backgrounds is visible */
[data-theme="light"] *[style*="background-color: #000000"] .text-xs,
[data-theme="light"] *[style*="background-color: #000000"] .text-sm,
[data-theme="light"] *[style*="background-color: #000000"] span,
[data-theme="light"] *[style*="background-color: #000000"] p {
  color: var(--text-primary) !important;
}

/* Ring colors for profile pictures */
[data-theme="light"] .ring-2[style*="--tw-ring-color: var(--text-primary)"] {
  --tw-ring-color: var(--text-primary) !important;
}

/* App title and subtitle */
[data-theme="light"] .text-xl.font-bold.text-white {
  color: var(--text-primary) !important;
}

[data-theme="light"] .text-xs.text-gray-400 {
  color: var(--text-secondary) !important;
}

/* Light theme toast notifications */
[data-theme="light"] .toast-info {
  background-color: var(--text-primary) !important;
  color: var(--bg-primary) !important;
}

/* Light theme modals */
[data-theme="light"] .modal {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
}

[data-theme="light"] .modal h2,
[data-theme="light"] .modal h3 {
  color: var(--text-primary) !important;
}

[data-theme="light"] .modal p {
  color: var(--text-secondary) !important;
}

/* Light theme typing indicator */
[data-theme="light"] .typing-indicator-text {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .typing-indicator-container-sticky {
  box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
}

/* Light theme presence indicators */
[data-theme="light"] .presence-text {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .presence-pill {
  background-color: rgba(0, 0, 0, 0.05) !important;
  border: 1px solid rgba(0, 0, 0, 0.1) !important;
}

/* Light theme message timestamps */
[data-theme="light"] .message-timestamp {
  color: var(--text-tertiary) !important;
}

/* Light theme reply references */
[data-theme="light"] .discord-reply-author {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .discord-reply-message {
  color: var(--text-tertiary) !important;
}

[data-theme="light"] .discord-reply-spine {
  border-color: rgba(0, 0, 0, 0.2) !important;
}

/* Light theme date dividers */
[data-theme="light"] .date-divider-line {
  background: rgba(0, 0, 0, 0.1) !important;
}

[data-theme="light"] .date-divider-text {
  color: var(--text-tertiary) !important;
}

/* Light theme file attachments */
[data-theme="light"] .file-attachment {
  background: var(--bg-tertiary) !important;
  border-color: var(--border-color) !important;
}

[data-theme="light"] .image-attachment {
  border-color: var(--border-color) !important;
  background: var(--bg-secondary) !important;
}

/* Light theme context menu */
[data-theme="light"] .message-options-menu {
  background: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15) !important;
}

[data-theme="light"] .message-options-item {
  color: var(--text-primary) !important;
}

[data-theme="light"] .message-options-item:hover {
  background: var(--hover-bg) !important;
}

[data-theme="light"] .message-options-divider {
  background: var(--border-color) !important;
}

/* Light theme edit message */
[data-theme="light"] .edit-message-container {
  background: var(--bg-tertiary) !important;
  border-color: var(--text-primary) !important;
}

[data-theme="light"] .edit-message-input {
  background: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  color: var(--text-primary) !important;
}

[data-theme="light"] .edit-message-hint {
  color: var(--text-secondary) !important;
}

/* Light theme attachment menu */
[data-theme="light"] .attachment-menu {
  background: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15) !important;
}

[data-theme="light"] .attachment-menu-item {
  color: var(--text-primary) !important;
}

[data-theme="light"] .attachment-menu-item:hover {
  background-color: var(--hover-bg) !important;
}

/* Light theme jump to present */
[data-theme="light"] .jump-to-present-wrapper {
  background: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15) !important;
}

[data-theme="light"] .jump-to-present-text {
  color: var(--text-secondary) !important;
}

/* Light theme pinned messages */
[data-theme="light"] .pinned-messages-popup {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15) !important;
}

[data-theme="light"] .pinned-messages-header {
  border-color: var(--border-color) !important;
}

[data-theme="light"] .pinned-message-item {
  border-color: rgba(0, 0, 0, 0.05) !important;
}

[data-theme="light"] .pinned-message-item:hover {
  background-color: rgba(0, 0, 0, 0.03) !important;
}

/* Light theme character count */
[data-theme="light"] .character-count {
  border-color: rgba(0, 0, 0, 0.1) !important;
}

/* Light theme mention suggestions */
[data-theme="light"] .mention-suggestions {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.15), 0 10px 10px -5px rgba(0, 0, 0, 0.1) !important;
}

[data-theme="light"] .mention-suggestion-item {
  color: var(--text-primary) !important;
}

[data-theme="light"] .mention-suggestion-item:hover {
  background-color: rgba(0, 0, 0, 0.1) !important;
}

[data-theme="light"] .mention-tabs {
  border-color: var(--border-color) !important;
}

[data-theme="light"] .mention-tab {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .mention-tab:hover {
  color: var(--text-primary) !important;
  background-color: rgba(0, 0, 0, 0.05) !important;
}

[data-theme="light"] .mention-tab.active {
  color: var(--text-primary) !important;
  background-color: rgba(88, 101, 242, 0.1) !important;
}

/* Light theme comprehensive text color fixes - FINAL OVERRIDE */
[data-theme="light"] .text-white,
[data-theme="light"] h1.text-white,
[data-theme="light"] h2.text-white,
[data-theme="light"] h3.text-white,
[data-theme="light"] h4.text-white,
[data-theme="light"] h5.text-white,
[data-theme="light"] h6.text-white,
[data-theme="light"] p.text-white,
[data-theme="light"] span.text-white,
[data-theme="light"] div.text-white,
[data-theme="light"] button.text-white,
[data-theme="light"] .text-sm.text-white,
[data-theme="light"] .text-lg.text-white,
[data-theme="light"] .text-xl.text-white,
[data-theme="light"] .font-bold.text-white,
[data-theme="light"] .font-semibold.text-white,
[data-theme="light"] .font-medium.text-white {
  color: var(--text-primary) !important;
}

/* Light theme hover text fixes */
[data-theme="light"] .hover\:text-white:hover,
[data-theme="light"] button.hover\:text-white:hover,
[data-theme="light"] .text-gray-400.hover\:text-white:hover {
  color: var(--text-primary) !important;
}

/* Light theme background fixes for gray classes */
[data-theme="light"] .bg-gray-700,
[data-theme="light"] .bg-gray-800,
[data-theme="light"] .bg-gray-900,
[data-theme="light"] input.bg-gray-700,
[data-theme="light"] textarea.bg-gray-700,
[data-theme="light"] button.bg-gray-700,
[data-theme="light"] div.bg-gray-800 {
  background-color: var(--bg-tertiary) !important;
}

/* Light theme hover background fixes */
[data-theme="light"] .hover\:bg-gray-600:hover,
[data-theme="light"] .hover\:bg-gray-700:hover,
[data-theme="light"] .hover\:bg-gray-800:hover,
[data-theme="light"] button.hover\:bg-gray-600:hover,
[data-theme="light"] button.hover\:bg-gray-700:hover,
[data-theme="light"] button.hover\:bg-gray-800:hover {
  background-color: var(--hover-bg) !important;
}

/* Light theme border fixes */
[data-theme="light"] .border-gray-600,
[data-theme="light"] .border-gray-700,
[data-theme="light"] input.border-gray-600,
[data-theme="light"] textarea.border-gray-600 {
  border-color: var(--border-color) !important;
}

/* Light theme text color fixes for gray classes */
[data-theme="light"] .text-gray-300,
[data-theme="light"] .text-gray-400,
[data-theme="light"] .text-gray-500,
[data-theme="light"] label.text-gray-400,
[data-theme="light"] p.text-gray-400,
[data-theme="light"] span.text-gray-400 {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .text-gray-600,
[data-theme="light"] .text-gray-700 {
  color: var(--text-tertiary) !important;
}

/* Light theme placeholder fixes */
[data-theme="light"] .placeholder-gray-400::placeholder,
[data-theme="light"] input.placeholder-gray-400::placeholder,
[data-theme="light"] textarea.placeholder-gray-400::placeholder {
  color: var(--text-tertiary) !important;
}

/* Light theme specific button fixes */
[data-theme="light"] button[style*="background-color: var(--error-color)"] {
  background-color: var(--error-color) !important;
  color: white !important;
}

[data-theme="light"] button[style*="background-color: var(--success-color)"] {
  background-color: var(--success-color) !important;
  color: white !important;
}

/* Light theme navigation button fixes */
[data-theme="light"] .text-gray-400.hover\:text-white.hover\:bg-gray-800 {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .text-gray-400.hover\:text-white.hover\:bg-gray-800:hover {
  color: var(--text-primary) !important;
  background-color: var(--hover-bg) !important;
}

/* Light theme input and form element fixes */
[data-theme="light"] input[class*="text-white"],
[data-theme="light"] textarea[class*="text-white"] {
  color: var(--text-primary) !important;
}

[data-theme="light"] input[class*="bg-gray"],
[data-theme="light"] textarea[class*="bg-gray"] {
  background-color: var(--bg-secondary) !important;
}

/* Light theme search and filter fixes */
[data-theme="light"] .search-section input {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-color) !important;
}

/* Light theme profile popup fixes */
[data-theme="light"] .profile-popup h2,
[data-theme="light"] .profile-popup p,
[data-theme="light"] .profile-popup label {
  color: var(--text-primary) !important;
}

[data-theme="light"] .profile-popup .text-gray-400 {
  color: var(--text-secondary) !important;
}

/* Light theme settings panel comprehensive fixes */
[data-theme="light"] .settings-panel .text-white {
  color: var(--text-primary) !important;
}

[data-theme="light"] .settings-panel .text-gray-300,
[data-theme="light"] .settings-panel .text-gray-400 {
  color: var(--text-secondary) !important;
}

/* Light theme dropdown comprehensive fixes */
[data-theme="light"] .dropdown-menu .text-white {
  color: var(--text-primary) !important;
}

[data-theme="light"] .dropdown-menu .text-gray-400 {
  color: var(--text-secondary) !important;
}

/* Light theme theme dropdown specific fixes */
[data-theme="light"] .theme-dropdown .text-white {
  color: var(--text-primary) !important;
}

[data-theme="light"] .theme-dropdown .text-gray-400 {
  color: var(--text-secondary) !important;
}

/* Light theme coming soon section fixes */
[data-theme="light"] .coming-soon .text-gray-400 {
  color: var(--text-secondary) !important;
}

/* Light theme search results fixes */
[data-theme="light"] .search-results h3.text-white {
  color: var(--text-primary) !important;
}

[data-theme="light"] .search-results .text-white {
  color: var(--text-primary) !important;
}

[data-theme="light"] .search-results .text-gray-400 {
  color: var(--text-secondary) !important;
}

/* Light theme contact and group card fixes */
[data-theme="light"] .contact-card .text-white,
[data-theme="light"] .group-card .text-white {
  color: var(--text-primary) !important;
}

[data-theme="light"] .contact-card .text-gray-400,
[data-theme="light"] .group-card .text-gray-400 {
  color: var(--text-secondary) !important;
}

/* Light theme universal override for any remaining issues */
[data-theme="light"] *[class*="text-white"] {
  color: var(--text-primary) !important;
}

[data-theme="light"] *[class*="text-gray-4"] {
  color: var(--text-secondary) !important;
}

[data-theme="light"] *[class*="bg-gray-7"],
[data-theme="light"] *[class*="bg-gray-8"],
[data-theme="light"] *[class*="bg-gray-9"] {
  background-color: var(--bg-tertiary) !important;
}

/* Light theme specific inline style overrides */
[data-theme="light"] [style*="background-color: #000000"],
[data-theme="light"] [style*="background-color:#000000"] {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
}

[data-theme="light"] [style*="color: var(--bg-primary)"] {
  color: var(--bg-primary) !important;
}

/* Light theme search input specific fix */
[data-theme="light"] input[style*="background-color: #000000"] {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Light theme filter container specific fix */
[data-theme="light"] .flex.space-x-1.rounded-lg.p-1[style*="background-color: #000000"] {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Light theme connection status specific elements */
[data-theme="light"] .backdrop-blur-sm.rounded-full {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
}

[data-theme="light"] .backdrop-blur-sm .bg-green-500,
[data-theme="light"] .backdrop-blur-sm .bg-red-500 {
  /* Keep the original colors for status indicators */
}

[data-theme="light"] .backdrop-blur-sm .text-green-400 {
  color: #22c55e !important;
}

[data-theme="light"] .backdrop-blur-sm .text-red-400 {
  color: #ef4444 !important;
}

/* Light theme profile button container */
[data-theme="light"] .flex.items-center.space-x-3.rounded-full[style*="background-color: #000000"] {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Light theme message input container */
[data-theme="light"] .fixed.bottom-0.left-0.right-0[style*="background-color: var(--bg-secondary)"] {
  background-color: var(--bg-secondary) !important;
  border-top: 1px solid var(--border-color) !important;
}

/* Light theme comprehensive black background override */
[data-theme="light"] *[style*="background-color: #000000"],
[data-theme="light"] *[style*="background-color:#000000"],
[data-theme="light"] *[style*="background-color: black"] {
  background-color: var(--bg-secondary) !important;
}

/* Light theme ensure text visibility on overridden backgrounds */
[data-theme="light"] *[style*="background-color: #000000"] *,
[data-theme="light"] *[style*="background-color:#000000"] *,
[data-theme="light"] *[style*="background-color: black"] * {
  color: var(--text-primary) !important;
}

/* Light theme filter button text fix */
[data-theme="light"] .filter-tab,
[data-theme="light"] button[ng-click*="filterContacts"],
[data-theme="light"] button[ng-click*="filterGroups"] {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .filter-tab.active,
[data-theme="light"] button[ng-click*="filterContacts"][ng-style*="color: var(--bg-primary)"],
[data-theme="light"] button[ng-click*="filterGroups"][ng-style*="color: var(--bg-primary)"] {
  color: var(--bg-primary) !important;
}

/* Light theme modals */
[data-theme="light"] .modal {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
}

[data-theme="light"] .modal h2,
[data-theme="light"] .modal h3 {
  color: var(--text-primary) !important;
}

[data-theme="light"] .modal p {
  color: var(--text-secondary) !important;
}

/* Light theme typing indicator */
[data-theme="light"] .typing-indicator-text {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .typing-indicator-container-sticky {
  box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
}

/* Light theme presence indicators */
[data-theme="light"] .presence-text {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .presence-pill {
  background-color: rgba(0, 0, 0, 0.05) !important;
  border: 1px solid rgba(0, 0, 0, 0.1) !important;
}

/* Light theme message timestamps */
[data-theme="light"] .message-timestamp {
  color: var(--text-tertiary) !important;
}

/* Light theme reply references */
[data-theme="light"] .discord-reply-author {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .discord-reply-message {
  color: var(--text-tertiary) !important;
}

[data-theme="light"] .discord-reply-spine {
  border-color: rgba(0, 0, 0, 0.2) !important;
}

/* Light theme date dividers */
[data-theme="light"] .date-divider-line {
  background: rgba(0, 0, 0, 0.1) !important;
}

[data-theme="light"] .date-divider-text {
  color: var(--text-tertiary) !important;
}

/* Light theme file attachments */
[data-theme="light"] .file-attachment {
  background: var(--bg-tertiary) !important;
  border-color: var(--border-color) !important;
}

[data-theme="light"] .image-attachment {
  border-color: var(--border-color) !important;
  background: var(--bg-secondary) !important;
}

/* Light theme context menu */
[data-theme="light"] .message-options-menu {
  background: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15) !important;
}

[data-theme="light"] .message-options-item {
  color: var(--text-primary) !important;
}

[data-theme="light"] .message-options-item:hover {
  background: var(--hover-bg) !important;
}

[data-theme="light"] .message-options-divider {
  background: var(--border-color) !important;
}

/* Light theme edit message */
[data-theme="light"] .edit-message-container {
  background: var(--bg-tertiary) !important;
  border-color: var(--text-primary) !important;
}

[data-theme="light"] .edit-message-input {
  background: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  color: var(--text-primary) !important;
}

[data-theme="light"] .edit-message-hint {
  color: var(--text-secondary) !important;
}

/* Light theme attachment menu */
[data-theme="light"] .attachment-menu {
  background: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15) !important;
}

[data-theme="light"] .attachment-menu-item {
  color: var(--text-primary) !important;
}

[data-theme="light"] .attachment-menu-item:hover {
  background-color: var(--hover-bg) !important;
}

/* Light theme jump to present */
[data-theme="light"] .jump-to-present-wrapper {
  background: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15) !important;
}

[data-theme="light"] .jump-to-present-text {
  color: var(--text-secondary) !important;
}

/* Light theme pinned messages */
[data-theme="light"] .pinned-messages-popup {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15) !important;
}

[data-theme="light"] .pinned-messages-header {
  border-color: var(--border-color) !important;
}

[data-theme="light"] .pinned-message-item {
  border-color: rgba(0, 0, 0, 0.05) !important;
}

[data-theme="light"] .pinned-message-item:hover {
  background-color: rgba(0, 0, 0, 0.03) !important;
}

/* Light theme character count */
[data-theme="light"] .character-count {
  border-color: rgba(0, 0, 0, 0.1) !important;
}

/* Light theme mention suggestions */
[data-theme="light"] .mention-suggestions {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.15), 0 10px 10px -5px rgba(0, 0, 0, 0.1) !important;
}

[data-theme="light"] .mention-suggestion-item {
  color: var(--text-primary) !important;
}

[data-theme="light"] .mention-suggestion-item:hover {
  background-color: rgba(0, 0, 0, 0.1) !important;
}

[data-theme="light"] .mention-tabs {
  border-color: var(--border-color) !important;
}

[data-theme="light"] .mention-tab {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .mention-tab:hover {
  color: var(--text-primary) !important;
  background-color: rgba(0, 0, 0, 0.05) !important;
}

[data-theme="light"] .mention-tab.active {
  color: var(--text-primary) !important;
  background-color: rgba(88, 101, 242, 0.1) !important;
}

html, body {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary);
  transition: background-color 0.3s ease, color 0.3s ease;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
}

.app-container {
  height: 100vh;
  overflow: hidden;
}

[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
  display: none !important;
}

/* Mosaic Particle Animation Background */
.mosaic-bg {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  overflow: hidden;
  pointer-events: none;
}

.mosaic-particle {
  position: absolute;
  background: var(--text-tertiary);
  opacity: 0.03;
  animation: mosaicFloat 20s infinite ease-in-out;
}

@keyframes mosaicFloat {
  0%, 100% {
    transform: translate(0, 0) rotate(0deg);
    opacity: 0.03;
  }
  25% {
    transform: translate(10px, -10px) rotate(90deg);
    opacity: 0.05;
  }
  50% {
    transform: translate(-5px, 5px) rotate(180deg);
    opacity: 0.02;
  }
  75% {
    transform: translate(-10px, -5px) rotate(270deg);
    opacity: 0.04;
  }
}

@layer components {
  .btn {
    @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 focus:outline-none;
  }

  .btn-primary {
    background-color: var(--text-primary);
    color: var(--bg-primary);
  }

  .btn-primary:hover {
    opacity: 0.9;
  }

  .btn-secondary {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
  }

  .btn-secondary:hover {
    background-color: var(--hover-bg);
  }

  .input {
    @apply w-full px-4 py-2 rounded-lg focus:outline-none transition-all duration-200;
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
  }

  .input:focus {
    border-color: var(--text-secondary);
  }

  .card {
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
  }
}

/* Custom scrollbar */
.custom-scrollbar::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 5px;
  margin: 4px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 5px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 5px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

.scrollbar-thin {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.2) rgba(255, 255, 255, 0.05);
}

.scrollbar-thin::-webkit-scrollbar {
  width: 10px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 5px;
  margin: 4px;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 5px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 5px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

/* Emoji Picker Popup */
.emoji-picker-popup {
  position: absolute;
  bottom: 80px;
  right: 20px;
  z-index: 1000;
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
  animation: slideUpFade 0.2s ease-out;
  overflow: hidden;
}

.emoji-picker-popup emoji-picker {
  --background: #000000;
  --border-color: rgba(255, 255, 255, 0.1);
  --button-active-background: rgba(255, 255, 255, 0.15);
  --button-hover-background: rgba(255, 255, 255, 0.08);
  --category-emoji-size: 1.5rem;
  --emoji-size: 1.75rem;
  --indicator-color: #ffffff;
  --input-border-color: rgba(255, 255, 255, 0.1);
  --input-font-color: #ffffff;
  --input-placeholder-color: rgba(255, 255, 255, 0.5);
  --outline-color: #ffffff;
  --category-font-color: #ffffff;
  --emoji-padding: 0.5rem;
  --input-padding: 0.75rem;
  --num-columns: 8;
  --category-emoji-padding: 0.5rem;
  width: 380px;
  height: 450px;
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* Style the emoji picker search input */
.emoji-picker-popup emoji-picker::part(search-wrapper) {
  padding: 12px;
  background: #000000;
}

.emoji-picker-popup emoji-picker::part(search) {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 10px 14px;
  color: #ffffff;
  font-size: 14px;
}

.emoji-picker-popup emoji-picker::part(search):focus {
  outline: none;
  border-color: rgba(255, 255, 255, 0.3);
  background: rgba(255, 255, 255, 0.08);
}

/* Style the category buttons */
.emoji-picker-popup emoji-picker::part(nav) {
  background: #000000;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  padding: 8px;
}

.emoji-picker-popup emoji-picker::part(nav-button) {
  border-radius: 10px;
  padding: 8px;
  transition: all 0.2s ease;
}

.emoji-picker-popup emoji-picker::part(nav-button):hover {
  background: rgba(255, 255, 255, 0.08);
}

.emoji-picker-popup emoji-picker::part(nav-button-active) {
  background: rgba(255, 255, 255, 0.15);
}

/* Style the emoji grid */
.emoji-picker-popup emoji-picker::part(emoji) {
  border-radius: 8px;
  transition: all 0.15s ease;
}

.emoji-picker-popup emoji-picker::part(emoji):hover {
  background: rgba(255, 255, 255, 0.1);
  transform: scale(1.2);
}

/* Style scrollbar inside emoji picker - HIDDEN */
.emoji-picker-popup emoji-picker {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE and Edge */
  overflow: hidden;
}

.emoji-picker-popup emoji-picker::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

.emoji-picker-popup emoji-picker::part(scroll-container) {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE and Edge */
}

.emoji-picker-popup emoji-picker::part(scroll-container)::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/* Additional targeting for emoji picker scrollbar - Global */
emoji-picker {
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}

emoji-picker::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
}

emoji-picker * {
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}

emoji-picker *::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
}

/* Toast notifications */
.toast {
  @apply px-6 py-3 rounded-lg shadow-lg font-medium;
  animation: slideInRight 0.3s ease-out;
}

.toast-success {
  background-color: var(--success-color);
  color: white;
}

.toast-error {
  background-color: var(--error-color);
  color: white;
}

.toast-info {
  background-color: var(--text-primary);
  color: var(--bg-primary);
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Animations */
.fade-in {
  animation: fadeIn 0.4s ease-in;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.slide-in {
  animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
  from {
    transform: translateX(-10px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Discord-style message styling */
.discord-message {
  position: relative;
  transition: background-color 0.15s ease;
  max-width: 100%;
  overflow-wrap: break-word;
  word-wrap: break-word;
  word-break: break-word;
}

.discord-message:hover {
  background-color: rgba(255, 255, 255, 0.03);
}

.discord-message .message-content {
  word-wrap: break-word;
  overflow-wrap: break-word;
  word-break: break-word;
  max-width: 100%;
  line-height: 1.375;
}

.discord-message .message-content p {
  word-wrap: break-word;
  overflow-wrap: break-word;
  word-break: break-word;
  max-width: 100%;
  font-size: 0.9375rem; /* Slightly smaller than default (15px instead of 16px) */
  line-height: inherit;
  margin: 0;
}

/* Mention styles - Discord style */
.mention {
  padding: 2px 4px;
  border-radius: 4px;
  font-weight: 600;
  border: 1px solid rgba(255, 255, 255, 0.2);
  display: inline;
  vertical-align: baseline;
  line-height: inherit;
}

/* User mentions - white color */
.mention.user-mention {
  background-color: rgba(255, 255, 255, 0.1);
  color: #ffffff;
}

/* Role mentions - use role color (set via inline styles) */
.mention.role-mention {
  /* Color and background set via inline styles in parseMentions function */
}

[data-theme="light"] .mention.user-mention {
  background-color: rgba(255, 255, 255, 0.15);
  color: #000000;
}

/* Highlighted message (when user is mentioned) */
.message-mentioned {
  background-color: rgba(250, 166, 26, 0.1) !important;
  border-left: 2px solid #faa61a !important;
  margin-left: -16px !important;
  padding-left: 14px !important;
}

.message-mentioned.discord-message {
  background-color: rgba(250, 166, 26, 0.1) !important;
}

/* Messages area and input area layout */
.chat-interface {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
  max-width: 100%;
}

.messages-area {
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  position: relative;
  min-height: 0;
  max-width: 100%;
}

.input-area {
  flex-shrink: 0;
  position: relative;
  z-index: 10;
  background-color: var(--bg-primary);
  max-width: 100%;
}

/* Message hover actions */
.discord-message .hover-actions {
  position: absolute;
  top: -10px;
  right: 16px;
  background: #1a1a1a;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
  z-index: 10;
  padding: 3px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2px;
  transition: opacity 0.15s ease;
}

.discord-message .hover-action-btn {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  color: rgba(255, 255, 255, 0.6);
  background: transparent;
  border-radius: 4px;
  padding: 0;
  margin: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  cursor: pointer;
  width: 28px;
  height: 28px;
  min-width: 28px;
  min-height: 28px;
  max-width: 28px;
  max-height: 28px;
  flex-shrink: 0;
  outline: none;
}

.discord-message .hover-action-btn svg {
  width: 16px !important;
  height: 16px !important;
  flex-shrink: 0;
  pointer-events: none;
  display: block;
  margin: auto;
}

.discord-message .hover-action-btn:hover {
  background-color: rgba(255, 255, 255, 0.2) !important;
  color: rgba(255, 255, 255, 1) !important;
  transform: scale(1.15) !important;
}

.discord-message .hover-action-btn:active {
  transform: scale(0.9) !important;
  background-color: rgba(255, 255, 255, 0.3) !important;
}

/* File attachment styling */
.file-attachment {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  transition: all 0.2s ease;
}

.file-attachment:hover {
  background: var(--hover-bg);
  border-color: var(--text-tertiary);
}

.image-attachment {
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid var(--border-color);
  background: var(--bg-secondary);
}

.image-attachment img {
  border-radius: 12px;
  display: block;
  object-fit: cover;
}

/* Reply indicator */
.reply-indicator {
  background: var(--bg-tertiary);
  border-left: 3px solid var(--text-primary);
  border-radius: 8px;
  padding: 8px 12px;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.reply-indicator-content {
  flex: 1;
  min-width: 0;
}

.reply-indicator-header {
  font-size: 0.6875rem;
  color: var(--text-primary);
  font-weight: 600;
  margin-bottom: 2px;
}

.reply-indicator-message {
  font-size: 0.8125rem;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.reply-indicator-close {
  flex-shrink: 0;
  margin-left: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: color 0.2s ease;
}

.reply-indicator-close:hover {
  color: var(--text-primary);
}

/* File preview - Multiple files support */
.file-previews-container {
  background: var(--bg-tertiary);
  border-left: 3px solid var(--text-primary);
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 12px;
  max-width: 100%;
  overflow: hidden;
}

.file-previews-scroll {
  display: flex;
  gap: 12px;
  overflow-x: auto;
  overflow-y: hidden;
  padding-bottom: 8px;
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
}

.file-previews-scroll::-webkit-scrollbar {
  height: 6px;
}

.file-previews-scroll::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 3px;
}

.file-previews-scroll::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

.file-previews-scroll::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

.file-preview-item {
  flex-shrink: 0;
  position: relative;
}

.preview-thumbnail {
  width: 120px;
  height: 120px;
  border-radius: 8px;
  overflow: hidden;
  background: var(--bg-secondary);
  position: relative;
  border: 1px solid var(--border-color);
}

.preview-thumbnail .preview-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.preview-file {
  width: 150px;
  height: 120px;
  border-radius: 8px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 12px;
  position: relative;
}

.preview-file-icon {
  margin-bottom: 8px;
}

.preview-file-name {
  font-size: 0.75rem;
  color: var(--text-primary);
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  width: 100%;
  max-width: 130px;
}

.preview-remove-btn {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: rgba(239, 68, 68, 0.9);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
}

.preview-remove-btn:hover {
  background: rgba(239, 68, 68, 1);
  transform: scale(1.1);
}

/* Image Lightbox */
.image-lightbox {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.95);
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.2s ease-out;
}

.lightbox-content {
  position: relative;
  max-width: 90vw;
  max-height: 90vh;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none; /* Allow clicks to pass through to lightbox background */
}

.lightbox-image {
  max-width: 100%;
  max-height: 90vh;
  object-fit: contain;
  border-radius: 8px;
  pointer-events: auto; /* Re-enable pointer events for the image */
}

.lightbox-close {
  position: absolute;
  top: 20px;
  right: 20px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
  backdrop-filter: blur(10px);
  z-index: 10001;
}

.lightbox-close:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: scale(1.1);
}

.lightbox-nav {
  position: fixed; /* Changed from absolute to fixed for viewport positioning */
  top: 50%;
  transform: translateY(-50%);
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
  backdrop-filter: blur(10px);
  z-index: 10001;
}

.lightbox-nav:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: translateY(-50%) scale(1.1);
}

.lightbox-nav-prev {
  left: 20px; /* Fixed to left edge of viewport */
}

.lightbox-nav-next {
  right: 20px; /* Fixed to right edge of viewport */
}

.lightbox-counter {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.7);
  color: white;
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 14px;
  backdrop-filter: blur(10px);
}

/* File preview */
.file-preview-container {
  background: var(--bg-tertiary);
  border: 2px solid var(--text-primary);
  border-radius: 12px;
  padding: 12px;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  animation: slideUpFade 0.3s ease-out;
}

.file-preview-content {
  flex: 1;
  min-width: 0;
}

.file-preview-image {
  max-width: 300px;
  max-height: 200px;
  overflow: hidden;
  border-radius: 8px;
  background: var(--bg-secondary);
}

.file-preview-image .preview-img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}

.file-preview-file {
  padding: 8px;
  background: var(--bg-secondary);
  border-radius: 8px;
}

.file-preview-delete {
  flex-shrink: 0;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid var(--error-color);
  border-radius: 8px;
  color: var(--error-color);
  cursor: pointer;
  transition: all 0.2s ease;
}

.file-preview-delete:hover {
  background: rgba(239, 68, 68, 0.2);
  transform: scale(1.05);
}

@keyframes slideUpFade {
  from {
    transform: translateY(10px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Discord-style message reply reference */
.discord-reply-container {
  position: relative;
  display: flex;
  align-items: center;
  margin-bottom: 4px;
  margin-left: 16px;
  padding-left: 56px;
  padding-right: 16px;
  min-height: 20px;
  cursor: pointer;
  transition: opacity 0.15s ease;
  max-width: calc(100% - 32px);
}

.discord-reply-container:hover {
  opacity: 0.8;
}

.discord-reply-spine {
  position: absolute;
  left: 4px;
  top: 0;
  width: 40px;
  height: 10px;
  border-left: 2px solid rgba(255, 255, 255, 0.2);
  border-top: 2px solid rgba(255, 255, 255, 0.2);
  border-top-left-radius: 6px;
  margin-top: 8px;
}

.discord-reply-avatar {
  position: absolute;
  left: 32px;
  top: 0;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  object-fit: cover;
}

.discord-reply-content {
  display: flex;
  align-items: baseline;
  gap: 6px;
  font-size: 0.875rem;
  line-height: 1.25rem;
  margin-left: 0;
  min-width: 0;
  flex: 1;
  overflow: hidden;
}

.discord-reply-author {
  color: rgba(255, 255, 255, 0.7);
  font-weight: 500;
  font-size: 0.875rem;
  cursor: pointer;
  flex-shrink: 0;
}

.discord-reply-author:hover {
  color: rgba(255, 255, 255, 0.9);
  text-decoration: underline;
}

.discord-reply-message {
  color: rgba(255, 255, 255, 0.5);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: 0.875rem;
  flex: 1;
  min-width: 0;
}

.discord-reply-deleted {
  font-style: italic;
  color: rgba(255, 255, 255, 0.3) !important;
}

/* Message highlight animation */
.message-highlight {
  background-color: rgba(255, 255, 255, 0.1) !important;
  animation: highlightFade 2s ease-out forwards;
}

@keyframes highlightFade {
  0% {
    background-color: rgba(255, 255, 255, 0.15);
  }
  100% {
    background-color: transparent;
  }
}

/* Date divider */
.date-divider {
  display: flex;
  align-items: center;
  margin: 16px 0;
  padding: 0 16px;
}

.date-divider-line {
  flex: 1;
  height: 1px;
  background: rgba(255, 255, 255, 0.06);
}

.date-divider-text {
  padding: 0 16px;
  font-size: 0.75rem;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.4);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Message wrapper for grouping */
.message-wrapper {
  position: relative;
}

/* Grouped message timestamp (shows on hover) */
.grouped-message-timestamp {
  display: inline-block;
  font-size: 0.625rem;
  text-align: right;
  line-height: 1.375rem;
}

/* Old reply reference styles - keeping for backwards compatibility but hidden */
.message-reply-reference {
  display: none;
}

.message-reply-reference-header {
  background: var(--bg-tertiary);
  border-left: 3px solid var(--text-primary);
  border-radius: 4px;
  padding: 8px 12px;
  margin-bottom: 8px;
  font-size: 0.875rem;
  cursor: pointer;
  transition: background 0.2s ease;
}

.message-reply-reference:hover {
  background: var(--hover-bg);
}

.message-reply-reference-header {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 4px;
}

.message-reply-reference-icon {
  width: 14px;
  height: 14px;
  color: var(--text-secondary);
}

.message-reply-reference-author {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-primary);
}

.message-reply-reference-content {
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-size: 0.8125rem;
}

/* Message options menu */
.message-options-menu {
  position: fixed;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
  min-width: 200px;
  z-index: 1000;
  padding: 6px 0;
}

.message-options-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  color: var(--text-primary);
  cursor: pointer;
  transition: background 0.15s ease;
  font-size: 0.875rem;
}

.message-options-item:hover {
  background: var(--hover-bg);
}

.message-options-item.danger {
  color: var(--error-color);
}

.message-options-item.danger:hover {
  background: rgba(239, 68, 68, 0.1);
}

.message-options-divider {
  height: 1px;
  background: var(--border-color);
  margin: 6px 0;
}

.message-options-icon {
  width: 18px;
  height: 18px;
  margin-left: 12px;
}

/* Edit message input */
.edit-message-container {
  background: var(--bg-tertiary);
  border: 2px solid var(--text-primary);
  border-radius: 8px;
  padding: 12px;
  margin-top: 8px;
}

.edit-message-input {
  width: 100%;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 8px 12px;
  color: var(--text-primary);
  font-size: 0.875rem;
  resize: vertical;
  min-height: 60px;
}

.edit-message-input:focus {
  outline: none;
  border-color: var(--text-secondary);
}

.edit-message-hint {
  font-size: 0.75rem;
  color: var(--text-secondary);
  margin-top: 6px;
}

.edit-message-hint span {
  color: var(--text-primary);
  font-weight: 500;
}

/* Attachment menu */
.attachment-menu {
  position: absolute;
  bottom: 100%;
  left: 0;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
  z-index: 50;
  min-width: 200px;
  margin-bottom: 8px;
}

.attachment-menu-item {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  color: var(--text-primary);
  text-decoration: none;
  transition: background-color 0.2s;
  cursor: pointer;
}

.attachment-menu-item:hover {
  background-color: var(--hover-bg);
}

.attachment-menu-item:first-child {
  border-radius: 12px 12px 0 0;
}

.attachment-menu-item:last-child {
  border-radius: 0 0 12px 12px;
}

.attachment-menu-item svg {
  margin-right: 12px;
  width: 20px;
  height: 20px;
}

/* Jump to Present Button */
.jump-to-present-container {
  position: absolute;
  bottom: 180px;
  left: 0;
  right: 0;
  z-index: 10;
  animation: slideUpFade 0.3s ease-out;
  opacity: 1;
  transition: opacity 0.3s ease-out;
  pointer-events: none;
  display: flex;
  justify-content: center;
  align-items: center;
}

.jump-to-present-wrapper {
  display: flex;
  align-items: center;
  gap: 12px;
  background: var(--bg-secondary);
  backdrop-filter: blur(8px);
  border: 1px solid var(--border-color);
  border-radius: 10px;
  padding: 8px 12px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
  white-space: nowrap;
  pointer-events: auto;
}

.jump-to-present-text {
  color: var(--text-secondary);
  font-size: 0.8125rem;
  font-weight: 500;
  white-space: nowrap;
}

.jump-to-present-button {
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--text-primary);
  color: var(--bg-primary);
  border: none;
  border-radius: 6px;
  padding: 6px 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 0.8125rem;
  font-weight: 600;
  white-space: nowrap;
}

.jump-to-present-button:hover {
  transform: translateY(-1px);
  opacity: 0.9;
}

.jump-to-present-button:active {
  transform: translateY(0);
}

/* Message timestamp */
.message-timestamp {
  font-size: 0.75rem;
  color: var(--text-secondary);
  font-weight: 400;
}

/* Loading indicators */
.loading-messages {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem;
}

.loading-messages .spinner {
  width: 2rem;
  height: 2rem;
  border: 2px solid var(--text-tertiary);
  border-top: 2px solid var(--text-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Typing indicator */
.typing-indicator {
  display: flex;
  align-items: center;
  gap: 3px;
}

.typing-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--text-secondary);
  animation: bounceDot 1.4s infinite ease-in-out;
}

.typing-dot:nth-child(1) {
  animation-delay: -0.32s;
}

.typing-dot:nth-child(2) {
  animation-delay: -0.16s;
}

@keyframes bounceDot {
  0%, 80%, 100% {
    transform: scale(0);
  }
  40% {
    transform: scale(1);
  }
}

/* Typing indicator container (stuck to input box) */
.typing-indicator-container-sticky {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 6px 16px;
  border-radius: 12px 12px 0 0;
  background-color: transparent;
  border: none;
  box-shadow: 0 -2px 8px rgba(255, 255, 255, 0.1);
  animation: slideUpFade 0.2s ease-out;
  margin-bottom: 0;
}

[data-theme="light"] .typing-indicator-container-sticky {
  box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
}

.typing-indicator-pill {
  position: relative;
  width: 32px;
  height: 16px;
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  overflow: hidden;
  flex-shrink: 0;
}

.typing-indicator-dot {
  position: absolute;
  width: 10px;
  height: 10px;
  background-color: var(--text-primary);
  border-radius: 50%;
  top: 3px;
  animation: slideTypingDot 1.5s ease-in-out infinite;
}

@keyframes slideTypingDot {
  0%, 100% {
    left: 3px;
  }
  50% {
    left: 19px;
  }
}

.typing-indicator-text {
  font-size: 0.8125rem;
  color: var(--text-secondary);
  font-weight: 500;
  white-space: nowrap;
}

/* Add to Contacts button styling */
.add-contact-btn {
  background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
  color: white;
  box-shadow: 0 2px 8px rgba(34, 197, 94, 0.3);
}

.add-contact-btn:hover:not(:disabled) {
  background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
  box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
  transform: translateY(-1px);
}

.add-contact-btn:active:not(:disabled) {
  transform: translateY(0);
  box-shadow: 0 2px 6px rgba(34, 197, 94, 0.3);
}

/* Pulse animation for connection status */
@keyframes pulse-soft {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.animate-pulse-soft {
  animation: pulse-soft 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Responsive design */
@media (max-width: 768px) {
  .image-attachment {
    max-width: 100%;
  }
  
  .file-attachment {
    max-width: 100%;
  }
}

/* Unread count badge */
.unread-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 20px;
  height: 20px;
  padding: 0 6px;
  background-color: var(--error-color);
  color: white;
  border-radius: 10px;
  font-size: 0.6875rem;
  font-weight: 700;
  line-height: 1;
}

/* Presence indicator */
.presence-indicator {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  border: 2px solid var(--bg-secondary);
  transition: background-color 0.3s ease;
}

.presence-online {
  background-color: #22c55e;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.2);
}

.presence-offline {
  background-color: #6b7280;
}

/* Presence pill in chat header */
.presence-pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  margin-top: 2px;
}

.presence-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.presence-dot-online {
  background-color: #22c55e;
  animation: pulse-green 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.presence-dot-idle {
  background-color: #eab308;
  animation: pulse-yellow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.presence-dot-offline {
  background-color: #6b7280;
}

@keyframes pulse-green {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

@keyframes pulse-yellow {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.presence-text {
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
  white-space: nowrap;
}

/* Sidebar Resize Handle */
.sidebar-resize-handle {
  position: absolute;
  top: 0;
  right: 0;
  width: 8px;
  height: 100%;
  cursor: col-resize;
  z-index: 20;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 0.2s ease;
}

.sidebar-resize-handle:hover {
  background-color: rgba(255, 255, 255, 0.05);
}

.sidebar-resize-handle.resizing {
  background-color: rgba(255, 255, 255, 0.1);
}

.sidebar-resize-handle-bar {
  width: 2px;
  height: 40px;
  background-color: rgba(255, 255, 255, 0.2);
  border-radius: 2px;
  transition: all 0.2s ease;
}

.sidebar-resize-handle:hover .sidebar-resize-handle-bar {
  background-color: rgba(255, 255, 255, 0.4);
  height: 60px;
}

.sidebar-resize-handle.resizing .sidebar-resize-handle-bar {
  background-color: var(--text-primary);
  height: 80px;
}

/* Prevent text selection during resize */
body.resizing {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

/* Filter dropdown animation */
.filter-dropdown-enter {
  animation: slideDownFade 0.2s ease-out;
}

@keyframes slideDownFade {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Pinned Messages Panel */
.pinned-messages-panel {
  max-height: 300px;
  display: flex;
  flex-direction: column;
}

.pinned-messages-list {
  overflow-y: auto;
  max-height: 250px;
}

.pinned-message-item {
  transition: background-color 0.2s ease;
}

.pinned-message-item:last-child {
  border-bottom: none !important;
}

/* Message highlight animation */
.message-highlight {
  animation: highlightFade 2s ease-out;
}

@keyframes highlightFade {
  0% {
    background-color: rgba(234, 179, 8, 0.3);
  }
  100% {
    background-color: transparent;
  }
}

/* Line clamp utility */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Pin notification banner */
.pin-notification-banner {
  background-color: rgba(234, 179, 8, 0.1);
  border-left: 3px solid #eab308;
  padding: 12px 16px;
  margin: 12px 16px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.pin-notification-content {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
  min-width: 0;
}

.pin-notification-text {
  flex: 1;
  min-width: 0;
}

.pin-notification-link {
  color: #60a5fa;
  cursor: pointer;
  text-decoration: none;
  transition: color 0.2s;
}

.pin-notification-link:hover {
  color: #93c5fd;
  text-decoration: underline;
}

/* Pinned Messages Popup (Discord-style) */
.pinned-messages-popup {
  position: absolute;
  top: 100%;
  right: 0;
  width: 420px;
  max-height: 500px;
  background-color: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
  z-index: 50;
  margin-top: 8px;
  margin-right: 16px;
  display: flex;
  flex-direction: column;
  animation: slideDownFade 0.2s ease-out;
}

@keyframes slideDownFade {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.pinned-messages-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  border-bottom: 1px solid var(--border-color);
  flex-shrink: 0;
}

.pinned-messages-content {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  min-height: 0;
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.08);
}

.pinned-messages-content::-webkit-scrollbar {
  width: 10px;
}

.pinned-messages-content::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 5px;
  margin: 4px 0;
}

.pinned-messages-content::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.25);
  border-radius: 5px;
  border: 2px solid var(--bg-secondary);
  background-clip: padding-box;
}

.pinned-messages-content::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.35);
  border: 2px solid var(--bg-secondary);
  background-clip: padding-box;
}

.pinned-message-item {
  padding: 12px 16px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  cursor: pointer;
  transition: background-color 0.15s ease;
}

.pinned-message-item:hover {
  background-color: rgba(255, 255, 255, 0.05);
}

.pinned-message-item:last-child {
  border-bottom: none;
}

/* Force left alignment for all content */
.pinned-message-item,
.pinned-message-item *,
.pinned-message-item .message-content,
.pinned-message-item .message-content * {
  text-align: left !important;
  justify-content: flex-start !important;
}

.pinned-message-item .message-content {
  display: block !important;
  width: 100% !important;
}

.pinned-message-item .message-content p {
  font-size: 0.9375rem !important;
  line-height: 1.5 !important;
  margin: 0 !important;
  padding: 0 !important;
  display: block !important;
  text-align: left !important;
  width: auto !important;
  max-width: 100% !important;
}

/* Responsive adjustments for pinned messages popup */
@media (max-width: 768px) {
  .pinned-messages-popup {
    width: calc(100vw - 32px);
    max-width: 420px;
  }
}
/* Character count display */
.character-count {
  font-size: 11px;
  font-weight: 500;
  padding: 4px 8px;
  border-radius: 6px;
  white-space: nowrap;
  backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.character-count.warning {
  background-color: rgba(234, 179, 8, 0.2);
  color: #fbbf24;
  border-color: rgba(234, 179, 8, 0.3);
}

.character-count.error {
  background-color: rgba(239, 68, 68, 0.2);
  color: #f87171;
  border-color: rgba(239, 68, 68, 0.3);
}

/* Discord-style character count in bottom right */
.discord-character-count {
  font-size: 12px;
  font-weight: 600;
  color: #fbbf24;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
  user-select: none;
  pointer-events: none;
}

/* Character limit modal animations */
.fade-in {
  animation: fadeIn 0.2s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Fix for long filenames in modals */
.break-words {
  word-break: break-word;
  overflow-wrap: break-word;
  word-wrap: break-word;
  hyphens: auto;
}

.overflow-wrap-anywhere {
  overflow-wrap: anywhere;
}

/* ========================================
   MOBILE RESPONSIVENESS
   ======================================== */

/* Mobile breakpoint */
@media (max-width: 767px) {
  /* Hide desktop elements */
  .left-nav-bar {
    display: none !important;
  }
  
  /* Hide desktop sidebar on mobile */
  .desktop-sidebar {
    display: none !important;
  }
  
  /* Mobile app layout */
  .mobile-app-container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
  }
  
  /* Mobile top bar */
  .mobile-top-bar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 60px;
    background-color: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 16px;
    z-index: 100;
    padding-top: env(safe-area-inset-top);
  }
  
  .mobile-top-bar-left {
    display: flex;
    align-items: center;
    gap: 12px;
    flex: 1;
    min-width: 0;
  }
  
  .mobile-top-bar-right {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-shrink: 0;
  }
  
  .mobile-app-title {
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary);
    white-space: nowrap;
  }
  
  .mobile-connection-status {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    color: #22c55e;
    background-color: #000000;
    padding: 6px 12px;
    border-radius: 12px;
    font-weight: 600;
    border: 1px solid var(--border-color);
  }
  
  /* Mobile content area */
  .mobile-content-area {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    margin-top: 60px;
    margin-bottom: 60px;
    background-color: var(--bg-primary);
  }
  
  /* Mobile bottom navigation */
  .mobile-bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60px;
    background-color: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: space-around;
    align-items: center;
    z-index: 100;
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .mobile-nav-item {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    padding: 8px;
    color: #8e9297;
    transition: all 0.2s;
    cursor: pointer;
    position: relative;
  }
  
  .mobile-nav-item.active {
    color: var(--text-primary);
  }
  
  .mobile-nav-item svg {
    width: 24px;
    height: 24px;
  }
  
  .mobile-nav-item span {
    font-size: 11px;
    font-weight: 600;
  }
  
  /* Profile picture in bottom nav */
  .mobile-nav-profile {
    position: relative;
  }
  
  .mobile-nav-profile-picture {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    overflow: hidden;
    border: 2px solid var(--border-color);
  }
  
  .mobile-nav-item.mobile-nav-profile.active .mobile-nav-profile-picture {
    border-color: var(--text-primary);
  }
  
  /* Mobile chat header (when in chat view) */
  .mobile-chat-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 60px;
    background-color: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    padding: 0 16px;
    gap: 12px;
    z-index: 100;
    padding-top: env(safe-area-inset-top);
  }
  
  .mobile-back-button {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    color: var(--text-primary);
    flex-shrink: 0;
  }
  
  .mobile-back-button:active {
    background-color: rgba(255, 255, 255, 0.1);
  }
  
  .mobile-chat-header-info {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: center;
    gap: 12px;
  }
  
  .mobile-chat-header-info img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  
  .mobile-chat-header-text {
    flex: 1;
    min-width: 0;
  }
  
  .mobile-chat-header-name {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  .mobile-chat-header-status {
    font-size: 12px;
    color: #8e9297;
  }
  
  /* Mobile list view (chats/groups) */
  .mobile-list-view {
    display: flex;
    flex-direction: column;
    height: 100%;
  }
  
  .mobile-search-section {
    padding: 16px;
    background-color: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
  }
  
  .mobile-filter-tabs {
    padding: 12px 16px;
    background-color: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
  }
  
  .mobile-contacts-list {
    flex: 1;
    overflow-y: auto;
  }
  
  /* Mobile contact card */
  .mobile-contact-card {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    gap: 12px;
    min-height: 72px;
    cursor: pointer;
    transition: background-color 0.2s;
  }
  
  .mobile-contact-card:active {
    background-color: rgba(255, 255, 255, 0.05);
  }
  
  .mobile-contact-card img {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  
  .mobile-contact-info {
    flex: 1;
    min-width: 0;
  }
  
  .mobile-contact-name {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  .mobile-contact-message {
    font-size: 14px;
    color: #8e9297;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-top: 2px;
  }
  
  .mobile-contact-meta {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 4px;
    flex-shrink: 0;
  }
  
  .mobile-contact-time {
    font-size: 12px;
    color: #8e9297;
  }
  
  /* Mobile chat view */
  .mobile-chat-view {
    display: flex;
    flex-direction: column;
    height: 100vh;
  }
  
  .mobile-messages-container {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    margin-top: 60px;
    margin-bottom: 70px;
  }
  
  .mobile-message-input-container {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
    padding: 12px 16px;
    padding-bottom: calc(12px + env(safe-area-inset-bottom));
  }
  
  /* Hide elements not needed on mobile */
  .mobile-hide {
    display: none !important;
  }
  
  /* Show only on mobile */
  .mobile-only {
    display: block !important;
  }
  
  /* Adjust modals for mobile */
  .mobile-modal {
    width: calc(100% - 32px) !important;
    max-width: calc(100% - 32px) !important;
    margin: 16px !important;
    max-height: calc(100vh - 32px) !important;
  }
  
  /* Full screen modals on mobile */
  .mobile-modal-fullscreen {
    width: 100% !important;
    height: 100% !important;
    max-width: 100% !important;
    max-height: 100% !important;
    margin: 0 !important;
    border-radius: 0 !important;
  }
  
  /* Message input adjustments */
  .mobile-message-input textarea {
    font-size: 16px !important; /* Prevents zoom on iOS */
  }
  
  /* Touch-friendly buttons */
  .mobile-touch-button {
    min-width: 44px !important;
    min-height: 44px !important;
  }
}

/* Tablet adjustments (768px - 1024px) */
@media (min-width: 768px) and (max-width: 1024px) {
  /* Sidebar slightly narrower on tablets */
  .tablet-sidebar {
    width: 280px !important;
    max-width: 280px !important;
  }
}

/* Mobile Chat View Styles - Simple Fix for Black Boxes */
@media (max-width: 767px) {
  /* Hide desktop elements when in mobile chat view */
  .mobile-hide-in-chat {
    display: none !important;
  }

  /* Hide desktop sidebar and navigation on mobile */
  .desktop-sidebar,
  .left-nav-bar {
    display: none !important;
  }

  /* Mobile Chat View Container - Cover everything */
  .mobile-chat-view-container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    width: 100vw;
    background-color: var(--bg-primary) !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    z-index: 10000 !important; /* Very high z-index to cover everything */
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    box-shadow: none !important;
  }

  /* Ensure all child elements have consistent background */
  .mobile-chat-view-container * {
    box-sizing: border-box;
  }

  /* Remove any potential black backgrounds from message elements */
  .mobile-message-item,
  .mobile-message-content,
  .mobile-message-with-header,
  .mobile-message-continuation {
    background-color: transparent !important;
    border: none !important;
  }

  /* Ensure message text areas don't have black backgrounds */
  .mobile-message-text,
  .mobile-message-text p {
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
  }

  /* Remove any black backgrounds from the entire mobile chat structure */
  .mobile-chat-view-container,
  .mobile-chat-view-container > *,
  .mobile-messages-container,
  .mobile-messages-list,
  .mobile-message-item,
  .mobile-message-content {
    background: var(--bg-primary) !important;
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
  }

  /* Force consistent background for the entire chat area */
  .mobile-chat-view-container::before,
  .mobile-chat-view-container::after,
  .mobile-messages-container::before,
  .mobile-messages-container::after {
    display: none !important;
  }

  /* Override any potential black color variables in mobile chat */
  .mobile-chat-view-container {
    --bg-primary: #000000 !important;
    --bg-secondary: #0a0a0a !important;
    --bg-tertiary: #141414 !important;
  }

  /* Ensure no elements have pure black (#000000) backgrounds that might appear as boxes */
  .mobile-chat-view-container [style*="background-color: #000000"],
  .mobile-chat-view-container [style*="background: #000000"],
  .mobile-messages-container [style*="background-color: #000000"],
  .mobile-messages-container [style*="background: #000000"] {
    background-color: var(--bg-primary) !important;
    background: var(--bg-primary) !important;
  }

  /* Mobile Chat Header */
  .mobile-chat-header-new {
    background-color: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
    padding: 18px 16px; /* Increased from 16px to 18px for pill status */
    flex-shrink: 0;
    z-index: 100;
    position: relative; /* Add relative positioning for popup */
  }

  /* Mobile Pinned Messages Popup */
  .mobile-pinned-popup {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background-color: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    z-index: 50;
    max-height: 300px;
    display: flex;
    flex-direction: column;
  }

  .mobile-pinned-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px;
    border-bottom: 1px solid var(--border-color);
    flex-shrink: 0;
  }

  .mobile-pinned-content {
    flex: 1;
    overflow-y: auto;
    min-height: 0;
  }

  .mobile-pinned-item {
    padding: 12px 16px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    cursor: pointer;
    transition: background-color 0.15s ease;
  }

  .mobile-pinned-item:hover {
    background-color: rgba(255, 255, 255, 0.05);
  }

  .mobile-pinned-item:last-child {
    border-bottom: none;
  }

  .mobile-chat-header-new {
    padding: 12px 16px;
    flex-shrink: 0;
    z-index: 100;
  }

  .mobile-back-btn {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    color: var(--text-primary);
    background: none;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s;
  }

  .mobile-back-btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }

  .mobile-header-btn {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    color: var(--text-secondary);
    background: none;
    border: none;
    cursor: pointer;
    transition: all 0.2s;
  }

  .mobile-header-btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
  }

  /* Mobile Warning Banner */
  .mobile-warning-banner {
    background-color: rgba(234, 179, 8, 0.1);
    border-bottom: 1px solid rgba(234, 179, 8, 0.3);
    padding: 12px 16px;
    flex-shrink: 0;
  }

  /* Mobile Messages Container */
  .mobile-messages-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background-color: transparent !important; /* Remove any background */
    border: none !important; /* Remove any borders */
    margin: 0 !important;
    padding: 0 !important;
  }

  .mobile-messages-list {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 8px 0; /* Reduced from 16px to 8px */
    background-color: transparent !important; /* Remove any background */
    border: none !important; /* Remove any borders */
    scroll-behavior: smooth; /* Smooth scrolling like desktop */
    position: relative;
    z-index: 1;
  }

  /* Mobile Message Item - ULTRA-TIGHT DISCORD SPACING */
  .mobile-message-item {
    position: relative;
    margin: 0 !important; /* Remove any default margins */
  }

  /* Apply the exact same spacing as desktop discord-message */
  .mobile-message-content {
    padding-left: 16px;
    padding-right: 16px;
    border-radius: 6px;
    transition: background-color 0.15s ease;
    margin: 0 !important; /* Remove any margins */
  }

  /* Master message (with header) - same as desktop pt-2 pb-0.5 */
  .mobile-message-with-header {
    padding-top: 8px !important;    /* pt-2 = 8px */
    padding-bottom: 2px !important; /* pb-0.5 = 2px */
  }

  /* Slave message (continuation) - ULTRA TIGHT like Discord */
  .mobile-message-continuation {
    padding-top: 2px !important;    /* py-0.5 = 2px like desktop */
    padding-bottom: 2px !important; /* py-0.5 = 2px like desktop */
    margin: 0 !important;           /* No margins */
  }

  /* Remove space-x-3 gap from continuation messages */
  .mobile-message-continuation .flex.space-x-3 > * + * {
    margin-left: 0 !important; /* Remove the space-x-3 gap */
  }

  /* Make continuation message layout tight */
  .mobile-message-continuation .flex {
    margin: 0 !important;
    padding: 0 !important;
    gap: 0 !important; /* Remove any flex gap */
  }

  /* Hide the empty avatar space in continuation messages */
  .mobile-message-continuation .flex-shrink-0.w-10 {
    display: none !important; /* Completely hide empty avatar space */
  }

  /* Adjust message text positioning in continuation messages */
  .mobile-message-continuation .flex-1.min-w-0 {
    margin: 0 !important;
    padding: 0 !important;
    margin-left: 52px !important; /* Align with message text above (40px avatar + 12px gap) */
    max-width: calc(100% - 52px) !important; /* Prevent overflow */
    overflow: hidden;
  }

  /* Ensure message containers don't overflow */
  .mobile-message-with-header .flex-1.min-w-0 {
    max-width: calc(100% - 52px) !important; /* Account for avatar space */
    overflow: hidden;
  }

  /* Force proper width constraints on mobile message containers */
  .mobile-message-content {
    max-width: 100%;
    overflow: hidden;
  }

  /* Mobile Swipe-to-Reply Styles */
  .mobile-message-content {
    position: relative;
    transition: transform 0.3s ease;
  }

  .mobile-message-content.swipe-reply-active {
    background-color: rgba(59, 130, 246, 0.1) !important; /* Blue tint when ready to reply */
  }

  .mobile-message-content.swipe-reply-active::after {
    content: '';
    position: absolute;
    left: -30px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 20px;
    opacity: 0.8;
  }

  /* Mobile Reply Preview */
  .mobile-reply-preview {
    display: flex;
    align-items: center;
    padding: 8px 16px;
    background-color: var(--bg-tertiary);
    border-left: 3px solid var(--text-secondary);
    margin-bottom: 0;
  }

  .mobile-reply-content {
    flex: 1;
    min-width: 0;
  }

  .mobile-reply-header {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 2px;
  }

  .mobile-reply-header svg {
    color: var(--text-secondary);
    flex-shrink: 0;
  }

  .mobile-reply-to {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-secondary);
  }

  .mobile-reply-message {
    font-size: 13px;
    color: var(--text-tertiary);
    line-height: 1.3;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .mobile-reply-cancel {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    color: var(--text-secondary);
    background: none;
    border: none;
    cursor: pointer;
    transition: all 0.2s;
    flex-shrink: 0;
  }

  .mobile-reply-cancel:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
  }

  /* New Desktop-like Mobile Input Design */
  .mobile-input-container {
    display: flex;
    align-items: flex-end;
    gap: 12px;
    padding: 16px;
  }

  /* Plus Button (Attachment) */
  .mobile-plus-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--text-primary);
    color: var(--bg-primary);
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    flex-shrink: 0;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }

  .mobile-plus-btn:hover {
    transform: scale(1.05);
  }

  .mobile-plus-btn:disabled {
    background-color: #6b7280;
    cursor: not-allowed;
    transform: none;
  }

  /* Input Field Container (Rounded like desktop) */
  .mobile-input-field-container {
    flex: 1;
    position: relative;
    background-color: #000000;
    border: 1px solid var(--border-color);
    border-radius: 20px;
    display: flex;
    align-items: center;
    transition: border-color 0.2s;
  }

  .mobile-input-field-container:focus-within {
    border-color: var(--text-primary);
  }

  /* Input Field */
  .mobile-input-field-new {
    flex: 1;
    background: transparent;
    border: none;
    outline: none;
    padding: 12px 16px;
    padding-right: 50px; /* Space for emoji button */
    color: var(--text-primary);
    font-size: 16px;
    line-height: 1.5;
    resize: none;
    min-height: 44px;
    max-height: 120px;
  }

  .mobile-input-field-new::placeholder {
    color: var(--text-tertiary);
  }

  /* Emoji Button Inside Input */
  .mobile-emoji-btn-inside {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    width: 32px;
    height: 32px;
    border-radius: 6px;
    background: none;
    border: none;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
  }

  .mobile-emoji-btn-inside:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
  }

  /* Send Button */
  .mobile-send-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--text-primary);
    color: var(--bg-primary);
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    flex-shrink: 0;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }

  .mobile-send-btn:hover {
    transform: scale(1.05);
  }

  .mobile-send-btn:disabled {
    background-color: #6b7280;
    cursor: not-allowed;
    transform: none;
  }

  /* Mic Button */
  .mobile-mic-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--text-primary);
    color: var(--bg-primary);
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    flex-shrink: 0;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }

  .mobile-mic-btn:hover {
    transform: scale(1.05);
  }

  /* Mobile Jump to Present Button - Smaller Desktop Style */
  .mobile-jump-to-present-container {
    position: fixed;
    bottom: 140px; /* Above the input area */
    left: 20px;
    right: 20px;
    z-index: 1000;
    transition: opacity 0.3s ease;
    pointer-events: none;
  }

  .mobile-jump-to-present-wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 6px; /* Smaller radius */
    padding: 8px 12px; /* Smaller padding */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); /* Smaller shadow */
    width: 100%;
    pointer-events: auto;
  }

  .mobile-jump-to-present-text {
    color: var(--text-secondary);
    font-size: 13px; /* Smaller font */
    font-weight: 500;
    flex: 1;
  }

  .mobile-jump-to-present-button {
    display: flex;
    align-items: center;
    background-color: var(--text-primary);
    color: var(--bg-primary);
    border: none;
    border-radius: 4px; /* Smaller radius */
    padding: 6px 12px; /* Smaller padding */
    font-size: 12px; /* Smaller font */
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
    flex-shrink: 0;
  }

  .mobile-jump-to-present-button:hover {
    transform: translateY(-1px);
    opacity: 0.9;
  }

  .mobile-jump-to-present-button:active {
    transform: translateY(0);
  }

  /* WhatsApp-style Unread Badge */
  .unread-badge-whatsapp {
    background-color: #25d366; /* WhatsApp green */
    color: white;
    font-size: 11px;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 10px;
    min-width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    line-height: 1;
  }

  /* WhatsApp-style Unread Badge - New Style (Black with White Text) */
  .unread-badge-whatsapp-new {
    background-color: #000000; /* Black background like WhatsApp */
    color: white;
    font-size: 11px;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 50%; /* Circular like WhatsApp */
    min-width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    line-height: 1;
    margin-top: 2px; /* Small margin below time */
  }

  /* Hover effect like desktop */
  .mobile-message-content:hover {
    background-color: rgba(255, 255, 255, 0.03);
  }

  /* Mobile Date Separator */
  .mobile-date-separator {
    display: flex;
    align-items: center;
    margin: 16px 16px 12px 16px; /* Reduced top margin from 24px to 16px */
    gap: 12px;
  }

  .mobile-date-line {
    flex: 1;
    height: 1px;
    background-color: var(--border-color);
  }

  .mobile-date-text {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-secondary);
    background-color: var(--bg-primary);
    padding: 0 8px;
    white-space: nowrap;
  }

  /* Mobile Message Text - DESKTOP-LIKE STYLING WITH PROPER WRAPPING */
  .mobile-message-text {
    color: var(--text-primary);
    line-height: 1.4;
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-all; /* Force break long words */
    max-width: 100%;
    overflow: hidden;
  }

  .mobile-message-text p {
    margin: 0;
    line-height: 1.4;
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-all; /* Force break long words */
    max-width: 100%;
    overflow: hidden;
    white-space: pre-wrap; /* Preserve whitespace but wrap */
  }

  /* Apply desktop message content styling to mobile */
  .mobile-message-content .message-content {
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-all; /* Force break long words */
    max-width: 100%;
    overflow: hidden;
  }

  .mobile-message-content .message-content p {
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-all; /* Force break long words */
    max-width: 100%;
    overflow: hidden;
  }

  /* Apply desktop header spacing - mb-1 = 4px margin-bottom */
  .mobile-message-content .flex.items-baseline.space-x-2.mb-1 {
    margin-bottom: 4px;
  }

  /* Ensure proper spacing between header and message content */
  .mobile-message-content .flex.items-baseline + .mobile-message-text {
    margin-top: 0;
  }

  /* Mobile File Item */
  .mobile-file-item {
    max-width: 300px;
  }

  /* Mobile Typing Indicator */
  .mobile-typing-indicator {
    padding: 8px 0;
    margin-bottom: 8px;
  }

  /* Mobile Input Area */
  .mobile-input-area {
    background-color: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
    padding: 12px 16px;
    flex-shrink: 0;
  }

  .mobile-input-form {
    display: flex;
    align-items: flex-end;
    gap: 8px;
  }

  .mobile-input-btn {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    color: var(--text-secondary);
    background: none;
    border: none;
    cursor: pointer;
    transition: all 0.2s;
    flex-shrink: 0;
  }

  .mobile-input-btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
  }

  .mobile-input-field {
    flex: 1;
    background-color: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 12px 16px;
    color: var(--text-primary);
    font-size: 16px;
    line-height: 1.4;
    resize: none;
    min-height: 40px;
    max-height: 120px;
    font-family: inherit;
  }

  .mobile-input-field:focus {
    outline: none;
    border-color: var(--text-primary);
  }

  .mobile-input-field::placeholder {
    color: var(--text-tertiary);
  }

  .mobile-send-btn {
    width: 40px;
    height: 40px;
    background-color: var(--text-primary);
    color: var(--bg-primary);
    border: none;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    flex-shrink: 0;
  }

  .mobile-send-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .mobile-send-btn:not(:disabled):hover {
    transform: scale(1.05);
  }

  .mobile-send-btn:not(:disabled):active {
    transform: scale(0.95);
  }

  /* Mobile Attachment Menu */
  .mobile-attachment-menu {
    position: absolute;
    bottom: 100%;
    left: 16px;
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    z-index: 100;
    margin-bottom: 8px;
    min-width: 120px;
  }

  .mobile-attachment-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    cursor: pointer;
    transition: background-color 0.15s ease;
    color: var(--text-primary);
  }

  .mobile-attachment-item:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }

  .mobile-attachment-item:first-child {
    border-radius: 12px 12px 0 0;
  }

  .mobile-attachment-item:last-child {
    border-radius: 0 0 12px 12px;
  }

  .mobile-attachment-item:only-child {
    border-radius: 12px;
  }

  .mobile-attachment-item + .mobile-attachment-item {
    border-top: 1px solid var(--border-color);
  }

  /* Mobile Emoji Picker */
  .mobile-emoji-picker {
    position: absolute;
    bottom: 100%;
    right: 60px;
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    z-index: 100;
    margin-bottom: 8px;
    width: 280px;
    max-height: 300px;
    display: flex;
    flex-direction: column;
  }

  .mobile-emoji-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-color);
    border-radius: 12px 12px 0 0;
  }

  .mobile-emoji-grid {
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    gap: 4px;
    padding: 12px;
    overflow-y: auto;
    max-height: 240px;
  }

  .mobile-emoji-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 18px;
    transition: background-color 0.15s ease;
  }

  .mobile-emoji-btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }

  /* Mobile Input Disabled */
  .mobile-input-disabled {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 16px;
    background-color: rgba(107, 114, 128, 0.1);
    border: 1px solid rgba(107, 114, 128, 0.3);
    border-radius: 12px;
  }

  /* Ensure proper scrolling */
  .mobile-messages-list::-webkit-scrollbar {
    width: 4px;
  }

  .mobile-messages-list::-webkit-scrollbar-track {
    background: transparent;
  }

  .mobile-messages-list::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 2px;
  }

  .mobile-messages-list::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
  }
}

/* Safe area insets for notched devices */
@supports (padding: max(0px)) {
  @media (max-width: 767px) {
    .mobile-top-bar {
      padding-top: max(12px, env(safe-area-inset-top));
      height: calc(60px + env(safe-area-inset-top));
    }
    
    .mobile-chat-header {
      padding-top: max(12px, env(safe-area-inset-top));
      height: calc(60px + env(safe-area-inset-top));
    }
    
    .mobile-bottom-nav {
      padding-bottom: max(8px, env(safe-area-inset-bottom));
      height: calc(60px + env(safe-area-inset-bottom));
    }
    
    .mobile-content-area {
      margin-top: calc(60px + env(safe-area-inset-top));
      margin-bottom: calc(60px + env(safe-area-inset-bottom));
    }

    .mobile-message-input-container {
      padding-bottom: calc(12px + env(safe-area-inset-bottom));
    }
  }
}
/* Coloris Color Picker Custom Styling */
input[data-coloris] {
  position: relative;
  overflow: hidden;
}

input[data-coloris]::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: radial-gradient(circle at 2px 2px, rgba(255,255,255,0.3) 1px, transparent 0);
  background-size: 8px 8px;
  opacity: 0.1;
  pointer-events: none;
  z-index: 1;
}

input[data-coloris]::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 16px;
  height: 16px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(255,255,255,0.7)' viewBox='0 0 24 24'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM7 3V1m0 18v2m8-10h2m-2 0h2m-2 0v2m0-2v-2'%3E%3C/path%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  pointer-events: none;
  z-index: 2;
}

/* Dark theme customization for Coloris */
.clr-picker {
  background: #1a1a1a !important;
  border: 1px solid var(--border-color) !important;
  border-radius: 12px !important;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.2) !important;
}

.clr-picker input {
  background: #000000 !important;
  border: 1px solid var(--border-color) !important;
  color: var(--text-primary) !important;
  border-radius: 6px !important;
}

.clr-picker button {
  background: var(--text-primary) !important;
  color: var(--bg-primary) !important;
  border-radius: 6px !important;
  border: none !important;
  font-weight: 500 !important;
}

.clr-picker .clr-gradient {
  border-radius: 8px !important;
}

.clr-picker .clr-hue {
  border-radius: 8px !important;
}

.clr-picker .clr-alpha {
  border-radius: 8px !important;
}

.clr-swatches button {
  border-radius: 6px !important;
  margin: 2px !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
}

.clr-swatches button:hover {
  transform: scale(1.1) !important;
  border-color: rgba(255, 255, 255, 0.3) !important;
}

/* Fix the color preview circle */
.clr-picker .clr-preview {
  border: 2px solid rgba(255, 255, 255, 0.3) !important;
  border-radius: 50% !important;
  background: transparent !important;
}

.clr-picker .clr-preview:after {
  border-radius: 50% !important;
  background: transparent !important;
}

/* Force the color preview to update properly */
.clr-picker .clr-preview div {
  border-radius: 50% !important;
  background: transparent !important;
}

/* Override any white background on the preview - use CSS custom property */
.clr-picker .clr-preview {
  background: var(--selected-color, #5865f2) !important;
}

.clr-picker .clr-preview div {
  background: var(--selected-color, #5865f2) !important;
}

/* Alternative approach - target the specific structure */
.clr-picker .clr-preview,
.clr-picker .clr-preview > div {
  background-color: inherit !important;
}

/* Force override any inline styles */
.clr-picker .clr-preview[style] {
  background-color: var(--selected-color, #5865f2) !important;
}

.clr-picker .clr-preview > div[style] {
  background-color: var(--selected-color, #5865f2) !important;
}

/* Role assignment dropdown styles */
.role-assign-dropdown .dropdown-menu {
  backdrop-filter: blur(10px);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
}

.role-assign-dropdown .member-item:hover {
  background: linear-gradient(90deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
}

.role-assign-dropdown .member-item:active {
  transform: scale(0.98);
}

/* Smooth transitions for dropdown */
.role-assign-dropdown .dropdown-menu {
  animation: dropdownFadeIn 0.2s ease-out;
}

@keyframes dropdownFadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Custom scrollbar for dropdown */
.role-assign-dropdown .dropdown-menu::-webkit-scrollbar {
  width: 6px;
}

.role-assign-dropdown .dropdown-menu::-webkit-scrollbar-track {
  background: transparent;
}

.role-assign-dropdown .dropdown-menu::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

.role-assign-dropdown .dropdown-menu::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}
/* Group Settings Modal Scrollbars */
.group-settings-scrollable {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.08);
}

.group-settings-scrollable::-webkit-scrollbar {
  width: 8px;
}

.group-settings-scrollable::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
  margin: 4px 0;
}

.group-settings-scrollable::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.25);
  border-radius: 4px;
  border: 1px solid rgba(0, 0, 0, 0.2);
  background-clip: padding-box;
}

.group-settings-scrollable::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.35);
  border: 1px solid rgba(0, 0, 0, 0.2);
  background-clip: padding-box;
}

/* Role assignment dropdown scrollbar */
.role-assign-dropdown .dropdown-members-list {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.08);
}

.role-assign-dropdown .dropdown-members-list::-webkit-scrollbar {
  width: 6px;
}

.role-assign-dropdown .dropdown-members-list::-webkit-scrollbar-track {
  background: transparent;
  margin: 4px 0;
}

.role-assign-dropdown .dropdown-members-list::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

.role-assign-dropdown .dropdown-members-list::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Members tab scrollbar */
.members-list-container {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.08);
}

.members-list-container::-webkit-scrollbar {
  width: 8px;
}

.members-list-container::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
  margin: 4px 0;
}

.members-list-container::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.25);
  border-radius: 4px;
  border: 1px solid rgba(0, 0, 0, 0.2);
  background-clip: padding-box;
}

.members-list-container::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.35);
  border: 1px solid rgba(0, 0, 0, 0.2);
  background-clip: padding-box;
}
/* Mention suggestions improvements */
.mention-suggestions {
  backdrop-filter: blur(10px);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.3);
  z-index: 9999 !important;
  pointer-events: auto;
}

/* Mention suggestions scrollbar */
.mention-suggestions-content {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.08);
}

.mention-suggestions-content::-webkit-scrollbar {
  width: 6px;
}

.mention-suggestions-content::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 3px;
  margin: 4px 0;
}

.mention-suggestions-content::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.25);
  border-radius: 3px;
  border: 1px solid rgba(0, 0, 0, 0.2);
  background-clip: padding-box;
}

.mention-suggestions-content::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.35);
  border: 1px solid rgba(0, 0, 0, 0.2);
  background-clip: padding-box;
}

.mention-suggestion-item {
  transition: all 0.15s ease;
  pointer-events: auto;
  user-select: none;
}

.mention-suggestion-item:hover {
  background-color: rgba(107, 114, 128, 0.3) !important;
}

.mention-suggestion-item.selected {
  background-color: #2563eb !important;
}

.mention-suggestion-item.selected:hover {
  background-color: #1d4ed8 !important;
}

/* Mention tabs styling */
.mention-tabs {
  display: flex;
  border-bottom: 1px solid #2b2d31;
}

.mention-tab {
  flex: 1;
  padding: 8px 12px;
  text-align: center;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: all 0.2s ease;
  color: #8e9297;
  border-bottom: 2px solid transparent;
}

.mention-tab:hover {
  color: #ffffff;
  background-color: rgba(255, 255, 255, 0.05);
}

.mention-tab.active {
  color: #ffffff;
  border-bottom-color: #5865f2;
  background-color: rgba(88, 101, 242, 0.1);
}

/* Role mention styling */
.role-mention-item {
  display: flex;
  align-items: center;
  gap: 8px;
}

.role-color-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  flex-shrink: 0;
}

/* Mention highlighting in messages */
.mention {
  padding: 2px 4px;
  border-radius: 4px;
  font-weight: 600;
  border: 1px solid rgba(255, 255, 255, 0.2);
  display: inline;
  vertical-align: baseline;
  line-height: inherit;
}

/* User mentions - white color */
.mention.user-mention {
  background-color: rgba(255, 255, 255, 0.1);
  color: #ffffff;
}

/* Role mentions - use role color (set via inline styles) */
.mention.role-mention {
  /* Color and background set via inline styles in parseMentions function */
  display: inline;
  vertical-align: baseline;
}

/* Confirmation modals - ensure they appear above group settings modal */
.confirmation-modal {
  z-index: 60 !important;
}

.group-settings-modal {
  z-index: 50 !important;
}

/* Light theme final comprehensive fixes for all remaining issues */

/* Override any remaining black backgrounds */
[data-theme="light"] *[style*="background-color: #000000"]:not(.bg-green-500):not(.bg-red-500):not(.bg-blue-500):not(.bg-yellow-500) {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Ensure text visibility in all overridden elements */
[data-theme="light"] *[style*="background-color: #000000"] * {
  color: var(--text-primary) !important;
}

/* Special handling for status indicators to keep their colors */
[data-theme="light"] .bg-green-500,
[data-theme="light"] .bg-red-500,
[data-theme="light"] .bg-blue-500,
[data-theme="light"] .bg-yellow-500 {
  /* Keep original colors for status indicators */
}

/* Fix for any remaining white text issues */
[data-theme="light"] .text-white,
[data-theme="light"] *[class*="text-white"] {
  color: var(--text-primary) !important;
}

/* Fix for gray text classes */
[data-theme="light"] .text-gray-400,
[data-theme="light"] .text-gray-300,
[data-theme="light"] .text-gray-500 {
  color: var(--text-secondary) !important;
}

/* Fix for hover states */
[data-theme="light"] .hover\:text-white:hover {
  color: var(--text-primary) !important;
}

[data-theme="light"] .hover\:bg-gray-800:hover,
[data-theme="light"] .hover\:bg-gray-700:hover {
  background-color: var(--hover-bg) !important;
}

/* Fix for border colors */
[data-theme="light"] .border-gray-700,
[data-theme="light"] .border-gray-600 {
  border-color: var(--border-color) !important;
}

/* Fix for ring colors */
[data-theme="light"] .ring-2,
[data-theme="light"] .ring-4 {
  --tw-ring-color: var(--border-color) !important;
}

/* Fix for backdrop blur elements */
[data-theme="light"] .backdrop-blur-sm {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Fix for rounded elements with black backgrounds */
[data-theme="light"] .rounded-full[style*="background-color: #000000"],
[data-theme="light"] .rounded-lg[style*="background-color: #000000"],
[data-theme="light"] .rounded-xl[style*="background-color: #000000"] {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Ensure proper contrast for all text elements */
[data-theme="light"] h1, [data-theme="light"] h2, [data-theme="light"] h3,
[data-theme="light"] h4, [data-theme="light"] h5, [data-theme="light"] h6,
[data-theme="light"] p, [data-theme="light"] span, [data-theme="light"] div,
[data-theme="light"] button, [data-theme="light"] input, [data-theme="light"] textarea {
  color: inherit;
}

/* Force proper colors for specific problematic elements */
[data-theme="light"] .text-sm.font-medium.text-white {
  color: var(--text-primary) !important;
}

[data-theme="light"] .text-xs.font-medium {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .font-bold.text-white {
  color: var(--text-primary) !important;
}

/* Status text colors */
[data-theme="light"] .status-online {
  color: #22c55e !important;
}

[data-theme="light"] .status-idle {
  color: #eab308 !important;
}

[data-theme="light"] .status-offline {
  color: var(--text-tertiary) !important;
}
/* Light theme specific fixes for remaining black elements */

/* Fix message input buttons (attachment and send buttons) */
[data-theme="light"] .message-input-container button,
[data-theme="light"] .input-area button,
[data-theme="light"] button[type="button"]:not([class*="bg-"]) {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

[data-theme="light"] .message-input-container button:hover,
[data-theme="light"] .input-area button:hover {
  background-color: var(--hover-bg) !important;
}

/* Fix left sidebar navigation buttons */
[data-theme="light"] .left-nav-bar button,
[data-theme="light"] .w-12.h-12.rounded-xl {
  background-color: transparent !important;
  color: var(--text-secondary) !important;
  border: 1px solid transparent !important;
}

[data-theme="light"] .left-nav-bar button:hover,
[data-theme="light"] .w-12.h-12.rounded-xl:hover {
  background-color: var(--hover-bg) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-color) !important;
}

/* Fix active navigation buttons */
[data-theme="light"] .left-nav-bar button[ng-style*="background-color: var(--text-primary)"],
[data-theme="light"] .w-12.h-12.rounded-xl[ng-style*="background-color: var(--text-primary)"] {
  background-color: var(--text-primary) !important;
  color: var(--bg-primary) !important;
}

/* Fix filter buttons container and buttons */
[data-theme="light"] .filter-tabs-container,
[data-theme="light"] .flex.space-x-1.rounded-lg.p-1 {
  background-color: var(--bg-tertiary) !important;
  border: 1px solid var(--border-color) !important;
}

[data-theme="light"] .filter-tab,
[data-theme="light"] .flex-1.px-1\.5.py-2.rounded-md {
  background-color: transparent !important;
  color: var(--text-secondary) !important;
}

[data-theme="light"] .filter-tab:hover,
[data-theme="light"] .flex-1.px-1\.5.py-2.rounded-md:hover {
  background-color: var(--hover-bg) !important;
  color: var(--text-primary) !important;
}

/* Fix active filter button */
[data-theme="light"] .filter-tab.active,
[data-theme="light"] .flex-1.px-1\.5.py-2.rounded-md[ng-style*="color: var(--bg-primary)"] {
  background-color: var(--text-primary) !important;
  color: var(--bg-primary) !important;
}

/* Fix grey message boxes/containers in chat area */
[data-theme="light"] .message-container,
[data-theme="light"] .discord-message,
[data-theme="light"] .message-bubble {
  background-color: transparent !important;
  border: none !important;
}

[data-theme="light"] .message-content {
  background-color: transparent !important;
  color: var(--text-primary) !important;
}

/* Fix message hover states */
[data-theme="light"] .discord-message:hover {
  background-color: rgba(0, 0, 0, 0.03) !important;
}

/* Fix message timestamps and metadata */
[data-theme="light"] .message-timestamp,
[data-theme="light"] .message-time {
  color: var(--text-tertiary) !important;
}

/* Fix message author names */
[data-theme="light"] .message-author,
[data-theme="light"] .discord-message .author-name {
  color: var(--text-primary) !important;
}

/* Fix any remaining grey backgrounds in chat */
[data-theme="light"] .bg-gray-100,
[data-theme="light"] .bg-gray-200,
[data-theme="light"] .bg-gray-50 {
  background-color: transparent !important;
}

/* Fix message input field specifically */
[data-theme="light"] textarea[placeholder*="Type your message"],
[data-theme="light"] input[placeholder*="Type your message"] {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Fix circular buttons (send, attachment, etc.) */
[data-theme="light"] .rounded-full button,
[data-theme="light"] button.rounded-full {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

[data-theme="light"] .rounded-full button:hover,
[data-theme="light"] button.rounded-full:hover {
  background-color: var(--hover-bg) !important;
}

/* Fix any black circular elements */
[data-theme="light"] .w-8.h-8.rounded-full,
[data-theme="light"] .w-10.h-10.rounded-full,
[data-theme="light"] .w-12.h-12.rounded-full {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
}

/* Fix settings gear icon */
[data-theme="light"] .settings-button,
[data-theme="light"] button[title="Settings"] {
  background-color: transparent !important;
  color: var(--text-secondary) !important;
}

[data-theme="light"] .settings-button:hover,
[data-theme="light"] button[title="Settings"]:hover {
  background-color: var(--hover-bg) !important;
  color: var(--text-primary) !important;
}

/* Fix chat and groups navigation buttons */
[data-theme="light"] button[title="Chats"],
[data-theme="light"] button[title="Groups"] {
  background-color: transparent !important;
  color: var(--text-secondary) !important;
}

[data-theme="light"] button[title="Chats"]:hover,
[data-theme="light"] button[title="Groups"]:hover {
  background-color: var(--hover-bg) !important;
  color: var(--text-primary) !important;
}

/* Fix active state for navigation */
[data-theme="light"] button[title="Chats"][ng-style*="background-color: var(--text-primary)"],
[data-theme="light"] button[title="Groups"][ng-style*="background-color: var(--text-primary)"],
[data-theme="light"] button[title="Settings"][ng-style*="background-color: var(--text-primary)"] {
  background-color: var(--text-primary) !important;
  color: var(--bg-primary) !important;
}
/* Light theme ultra-specific fixes for screenshot issues */

/* Fix the black circular buttons in message input */
[data-theme="light"] .fixed.bottom-0 button,
[data-theme="light"] .message-input-area button {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Fix the left sidebar black buttons */
[data-theme="light"] .left-nav-bar .w-12.h-12 {
  background-color: transparent !important;
  color: var(--text-secondary) !important;
}

[data-theme="light"] .left-nav-bar .w-12.h-12:hover {
  background-color: var(--hover-bg) !important;
  color: var(--text-primary) !important;
}

/* Fix the filter buttons black background */
[data-theme="light"] .p-1.relative.overflow-hidden {
  background-color: var(--bg-tertiary) !important;
}

/* Fix any SVG icons in buttons */
[data-theme="light"] button svg {
  color: inherit !important;
}

/* Fix message date dividers */
[data-theme="light"] .date-divider {
  color: var(--text-tertiary) !important;
}

[data-theme="light"] .date-divider-line {
  background-color: var(--border-color) !important;
}

/* Fix message content backgrounds */
[data-theme="light"] .message-wrapper,
[data-theme="light"] .message-group {
  background-color: transparent !important;
}

/* Fix any remaining black elements with specific targeting */
[data-theme="light"] *[style*="background-color:#000000"],
[data-theme="light"] *[style*="background-color: #000000"],
[data-theme="light"] *[style*="background-color:black"],
[data-theme="light"] *[style*="background-color: black"] {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Fix button hover states */
[data-theme="light"] button:hover:not(.bg-green-500):not(.bg-red-500):not(.bg-blue-500) {
  background-color: var(--hover-bg) !important;
  color: var(--text-primary) !important;
}

/* Fix input container buttons specifically */
[data-theme="light"] .input-container button,
[data-theme="light"] .message-input button {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
}

/* Fix attachment and send buttons */
[data-theme="light"] button[ng-click*="attachment"],
[data-theme="light"] button[ng-click*="send"],
[data-theme="light"] .attachment-button,
[data-theme="light"] .send-button {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Fix navigation icons */
[data-theme="light"] .nav-icon,
[data-theme="light"] .sidebar-icon {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .nav-icon:hover,
[data-theme="light"] .sidebar-icon:hover {
  color: var(--text-primary) !important;
}

/* Fix any remaining grey message bubbles */
[data-theme="light"] .message-bubble,
[data-theme="light"] .chat-bubble {
  background-color: transparent !important;
  border: none !important;
}

/* Fix message content text */
[data-theme="light"] .message-text,
[data-theme="light"] .message-content p {
  color: var(--text-primary) !important;
}

/* Fix deleted message styling */
[data-theme="light"] .message-deleted {
  color: var(--text-tertiary) !important;
  font-style: italic;
}

/* Fix mention styling */
[data-theme="light"] .mention {
  background-color: rgba(0, 0, 0, 0.1) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}
/* Light theme nuclear option - override everything black */

/* Force all black backgrounds to light theme colors */
[data-theme="light"] *[style*="background-color: #000"],
[data-theme="light"] *[style*="background-color:#000"],
[data-theme="light"] *[style*="background: #000"],
[data-theme="light"] *[style*="background:#000"] {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
}

/* Fix all button elements */
[data-theme="light"] button:not([class*="bg-green"]):not([class*="bg-red"]):not([class*="bg-blue"]):not([class*="bg-yellow"]) {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Fix all circular elements */
[data-theme="light"] .rounded-full:not(.bg-green-500):not(.bg-red-500) {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Fix all navigation elements */
[data-theme="light"] nav button,
[data-theme="light"] .nav-button,
[data-theme="light"] .sidebar-button {
  background-color: transparent !important;
  color: var(--text-secondary) !important;
}

[data-theme="light"] nav button:hover,
[data-theme="light"] .nav-button:hover,
[data-theme="light"] .sidebar-button:hover {
  background-color: var(--hover-bg) !important;
  color: var(--text-primary) !important;
}

/* Fix filter container */
[data-theme="light"] .filter-container {
  background-color: var(--bg-tertiary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Fix message area backgrounds */
[data-theme="light"] .messages-container,
[data-theme="light"] .chat-messages {
  background-color: var(--bg-primary) !important;
}

/* Fix any grey boxes in messages */
[data-theme="light"] .message-box,
[data-theme="light"] .chat-box {
  background-color: transparent !important;
}

/* Fix input area completely */
[data-theme="light"] .input-area,
[data-theme="light"] .message-input-area {
  background-color: var(--bg-secondary) !important;
  border-top: 1px solid var(--border-color) !important;
}

/* Fix all input elements */
[data-theme="light"] input,
[data-theme="light"] textarea {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

/* Fix placeholder text */
[data-theme="light"] input::placeholder,
[data-theme="light"] textarea::placeholder {
  color: var(--text-tertiary) !important;
}

/* Fix any remaining black text on light backgrounds */
[data-theme="light"] .text-black {
  color: var(--text-primary) !important;
}

/* Fix SVG icons */
[data-theme="light"] svg {
  color: inherit !important;
}

/* Fix any remaining issues with specific selectors */
[data-theme="light"] .w-8.h-8,
[data-theme="light"] .w-10.h-10,
[data-theme="light"] .w-12.h-12 {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
}

/* Fix hover states for all interactive elements */
[data-theme="light"] button:hover,
[data-theme="light"] .clickable:hover {
  opacity: 0.8;
}

/* Final catch-all for any missed elements */
[data-theme="light"] .bg-black,
[data-theme="light"] [class*="bg-black"] {
  background-color: var(--bg-tertiary) !important;
}

[data-theme="light"] .text-white,
[data-theme="light"] [class*="text-white"] {
  color: var(--text-primary) !important;
}
/* Mobile Context Menu Styles */
@media (max-width: 768px) {
  /* Prevent text selection during long-tap */
  .mobile-contact-card {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Context menu mobile adjustments */
  .fixed.z-50.border.rounded-lg.shadow-2xl {
    max-width: calc(100vw - 20px);
    max-height: calc(100vh - 20px);
    overflow-y: auto;
  }
  
  /* Larger touch targets for mobile */
  .mobile-contact-card button {
    min-height: 44px;
    padding: 12px 16px;
  }
}

/* Touch feedback for mobile contact cards */
.mobile-contact-card:active {
  background-color: rgba(255, 255, 255, 0.05);
  transform: scale(0.98);
  transition: all 0.1s ease;
}
/* Mobile Context Menu Button Styles */
.mobile-menu-button {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  flex-shrink: 0 !important;
  width: 32px !important;
  height: 32px !important;
  min-width: 32px !important;
  min-height: 32px !important;
  max-width: 32px !important;
  max-height: 32px !important;
  border-radius: 50% !important;
  opacity: 0.6;
  transition: opacity 0.2s ease, background-color 0.2s ease, transform 0.1s ease !important;
  background: transparent !important;
  border: none !important;
  cursor: pointer !important;
  margin-left: 8px !important;
  padding: 0 !important;
  box-sizing: border-box !important;
  outline: none !important;
  position: relative !important;
}

.mobile-menu-button:hover {
  opacity: 1 !important;
  background-color: rgba(255, 255, 255, 0.1) !important;
}

.mobile-menu-button:active {
  background-color: rgba(255, 255, 255, 0.2) !important;
  transform: scale(0.9) !important;
}

.mobile-menu-button:focus {
  outline: none !important;
}

.three-dots {
  font-size: 16px !important;
  color: var(--text-secondary) !important;
  font-weight: 900 !important;
  line-height: 1 !important;
  pointer-events: none !important;
  user-select: none !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
  display: block !important;
  text-align: center !important;
  width: 100% !important;
  height: 100% !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

.three-dots-container {
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 2px !important;
  pointer-events: none !important;
  width: 100% !important;
  height: 100% !important;
}

.dot {
  width: 3px !important;
  height: 3px !important;
  border-radius: 50% !important;
  background-color: var(--text-secondary) !important;
  pointer-events: none !important;
}

/* Mobile contact card layout adjustments */
.mobile-contact-card {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-color);
  transition: background-color 0.2s ease;
  min-height: 64px;
  gap: 12px;
}

.mobile-contact-card:hover {
  background-color: rgba(255, 255, 255, 0.05);
}

.mobile-contact-content {
  display: flex;
  align-items: center;
  flex: 1;
  min-width: 0; /* Allow text truncation */
  cursor: pointer;
  gap: 12px;
}

.mobile-contact-avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  flex-shrink: 0;
}

.mobile-contact-info {
  flex: 1;
  min-width: 0;
  position: relative;
}

/* Mobile Contact Header - Name and Time on same line */
.mobile-contact-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2px;
}

/* Mobile Contact Bottom - Message and Status Icons */
.mobile-contact-bottom {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.mobile-contact-name {
  font-weight: 600;
  color: var(--text-primary);
  font-size: 16px;
  line-height: 1.2;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 0px;
  flex: 1;
  min-width: 0;
}

.mobile-contact-message {
  color: var(--text-secondary);
  font-size: 14px;
  line-height: 1.3;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-top: 0px;
  flex: 1;
  min-width: 0;
}

.mobile-contact-right {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  justify-content: flex-start;
  margin-left: 12px;
  margin-right: 8px;
  flex-shrink: 0;
  gap: 6px;
}

.mobile-contact-time {
  color: var(--text-tertiary);
  font-size: 12px;
  flex-shrink: 0;
  font-weight: 400;
  white-space: nowrap;
  line-height: 1.2;
  text-align: right;
  margin-left: 8px;
}

.mobile-unread-badge {
  position: absolute;
  bottom: -2px;
  right: 0;
  background-color: #ef4444;
  color: white;
  font-size: 11px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 10px;
  min-width: 18px;
  text-align: center;
  line-height: 1.2;
}

/* Ensure context menu appears above everything */
.fixed.z-50 {
  z-index: 9999 !important;
}

/* Light theme mobile menu button */
[data-theme="light"] .mobile-menu-button {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .mobile-menu-button:hover {
  background-color: var(--hover-bg) !important;
}

[data-theme="light"] .mobile-menu-button:active {
  background-color: rgba(0, 0, 0, 0.1) !important;
}

[data-theme="light"] .three-dots {
  color: var(--text-secondary) !important;
}

[data-theme="light"] .dot {
  background-color: var(--text-secondary) !important;
}

/* Light theme mobile contact cards */
[data-theme="light"] .mobile-contact-card {
  border-color: var(--border-color);
}

[data-theme="light"] .mobile-contact-card:hover {
  background-color: var(--hover-bg);
}

[data-theme="light"] .mobile-contact-name {
  color: var(--text-primary);
}

[data-theme="light"] .mobile-contact-message {
  color: var(--text-secondary);
}

[data-theme="light"] .mobile-contact-time {
  color: var(--text-tertiary);
}

[data-theme="light"] .mobile-unread-badge {
  background-color: #ef4444;
  color: white;
}
/* Mobile Contact Layout Classes */

/* Mobile Chat View Styles */
.mobile-chat-view {
  display: flex;
  flex-direction: column;
  height: 100vh;
  background-color: var(--bg-primary);
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 30;
}

.mobile-chat-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background-color: var(--bg-secondary);
  border-bottom: 1px solid var(--border-color);
  position: sticky;
  top: 0;
  z-index: 20;
}

.mobile-chat-header-left {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
  min-width: 0;
}

.mobile-back-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: transparent;
  border: none;
  color: var(--text-primary);
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.mobile-back-button:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

.mobile-chat-header-info {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
  min-width: 0;
}

.mobile-chat-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  flex-shrink: 0;
}

.mobile-chat-header-text {
  flex: 1;
  min-width: 0;
}

.mobile-chat-header-name {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.mobile-chat-header-status {
  font-size: 12px;
  color: var(--text-secondary);
}

.mobile-chat-header-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.mobile-header-action-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.mobile-header-action-btn:hover {
  background-color: rgba(255, 255, 255, 0.1);
  color: var(--text-primary);
}

/* Mobile Messages Container */
.mobile-messages-container {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  background-color: var(--bg-primary);
}

.mobile-message-item {
  margin-bottom: 16px;
}

.mobile-message-continuation {
  margin-bottom: 4px;
}

.mobile-message-content {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.mobile-message-avatar {
  width: 40px;
  flex-shrink: 0;
}

.mobile-message-body {
  flex: 1;
  min-width: 0;
}

.mobile-message-header {
  display: flex;
  align-items: baseline;
  gap: 8px;
  margin-bottom: 4px;
}

.mobile-message-author {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.mobile-message-timestamp {
  font-size: 12px;
  color: var(--text-tertiary);
}

.mobile-message-text {
  font-size: 14px;
  line-height: 1.4;
  color: var(--text-primary);
  word-wrap: break-word;
}

.mobile-message-image img {
  max-width: 100%;
  max-height: 300px;
  border-radius: 8px;
  margin-top: 8px;
}

.mobile-message-file {
  margin-top: 8px;
}

.mobile-file-attachment {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background-color: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  max-width: 300px;
}

/* Mobile Date Divider */
.mobile-date-divider {
  display: flex;
  align-items: center;
  margin: 24px 0 16px 0;
  gap: 16px;
}

.mobile-date-divider-line {
  flex: 1;
  height: 1px;
  background-color: var(--border-color);
}

.mobile-date-divider-text {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  white-space: nowrap;
}

/* Mobile Typing Indicator */
.mobile-typing-indicator {
  padding: 8px 0;
}

.mobile-typing-content {
  display: flex;
  align-items: center;
  gap: 12px;
}

.mobile-typing-avatar {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.mobile-typing-dots {
  display: flex;
  gap: 2px;
}

.mobile-typing-dot {
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background-color: var(--text-secondary);
  animation: typing-pulse 1.4s infinite ease-in-out;
}

.mobile-typing-dot:nth-child(2) {
  animation-delay: 0.2s;
}

.mobile-typing-dot:nth-child(3) {
  animation-delay: 0.4s;
}

.mobile-typing-text {
  font-size: 14px;
  color: var(--text-secondary);
  font-style: italic;
}

@keyframes typing-pulse {
  0%, 60%, 100% {
    opacity: 0.3;
  }
  30% {
    opacity: 1;
  }
}

/* Mobile Message Input */
.mobile-message-input-container {
  padding: 16px;
  background-color: var(--bg-secondary);
  border-top: 1px solid var(--border-color);
  position: sticky;
  bottom: 0;
  z-index: 10;
}

.mobile-message-input-container textarea {
  background-color: var(--bg-primary) !important;
  border-color: var(--border-color) !important;
  color: var(--text-primary) !important;
  resize: none;
  font-family: inherit;
}

.mobile-message-input-container textarea::placeholder {
  color: var(--text-tertiary) !important;
}

.mobile-message-input-container textarea:focus {
  outline: none;
  border-color: var(--text-primary) !important;
  box-shadow: 0 0 0 1px var(--text-primary);
}

/* Mobile Pinned Messages Popup */
.mobile-pinned-messages-popup {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 50;
  display: flex;
  align-items: flex-end;
}

.mobile-pinned-messages-backdrop {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
}

.mobile-pinned-messages-content {
  position: relative;
  width: 100%;
  max-height: 70vh;
  background-color: var(--bg-secondary);
  border-top-left-radius: 16px;
  border-top-right-radius: 16px;
  border: 1px solid var(--border-color);
  display: flex;
  flex-direction: column;
}

.mobile-pinned-messages-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-color);
}

.mobile-pinned-messages-list {
  flex: 1;
  overflow-y: auto;
  padding: 16px 20px;
}

.mobile-pinned-message-item {
  padding: 12px;
  border-radius: 8px;
  margin-bottom: 8px;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.mobile-pinned-message-item:hover {
  background-color: rgba(255, 255, 255, 0.05);
}

.mobile-pinned-message-item:last-child {
  margin-bottom: 0;
}

/* Message highlighting for jump-to functionality */
.message-highlight {
  background-color: rgba(255, 255, 0, 0.2) !important;
  transition: background-color 0.3s ease;
}

/* Mobile responsive adjustments */
@media (max-width: 768px) {
  .mobile-hide {
    display: none !important;
  }
  
  .mobile-show {
    display: block !important;
  }
}

/* Mobile Status Icons */
.mobile-status-icons {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
  margin-top: 0px;
}

.mobile-status-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.mobile-status-icon.pin-icon {
  color: var(--text-primary);
}

.mobile-status-icon.favorite-icon {
  color: #eab308; /* yellow-500 */
}

.mobile-status-icon.mute-icon {
  color: #ef4444; /* red-500 */
}

/* Mobile Menu Button Lower Positioning */
.mobile-menu-button-lower {
  margin-top: 0px;
  align-self: center;
  flex-shrink: 0;
  margin-left: 8px;
}

/* Mobile Archived Folder */
.mobile-archived-folder {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-color);
  transition: background-color 0.2s ease;
  cursor: pointer;
  background-color: rgba(255, 255, 255, 0.02);
}

.mobile-archived-folder:hover {
  background-color: rgba(255, 255, 255, 0.05);
}

.mobile-archived-icon {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.1);
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 12px;
  flex-shrink: 0;
}

.mobile-archived-chevron {
  margin-left: 8px;
  flex-shrink: 0;
}

.mobile-archived-items {
  background-color: rgba(255, 255, 255, 0.02);
  border-left: 3px solid var(--text-primary);
  margin-left: 24px;
}

.mobile-contact-card.archived {
  background-color: rgba(255, 255, 255, 0.02);
  border-left: none;
}

.mobile-contact-card.archived:hover {
  background-color: rgba(255, 255, 255, 0.04);
}

/* Rotation utility */
.rotate-90 {
  transform: rotate(90deg);
}

/* Light theme mobile status icons */
[data-theme="light"] .mobile-status-icon.pin-icon {
  color: var(--text-primary);
}

[data-theme="light"] .mobile-status-icon.favorite-icon {
  color: #ca8a04; /* yellow-600 for better contrast */
}

[data-theme="light"] .mobile-status-icon.mute-icon {
  color: #dc2626; /* red-600 for better contrast */
}

/* Light theme archived folder */
[data-theme="light"] .mobile-archived-folder {
  background-color: rgba(0, 0, 0, 0.02);
  border-color: var(--border-color);
}

[data-theme="light"] .mobile-archived-folder:hover {
  background-color: var(--hover-bg);
}

[data-theme="light"] .mobile-archived-icon {
  background-color: rgba(0, 0, 0, 0.05);
}

[data-theme="light"] .mobile-archived-items {
  background-color: rgba(0, 0, 0, 0.02);
  border-left-color: var(--text-primary);
}

[data-theme="light"] .mobile-contact-card.archived {
  background-color: rgba(0, 0, 0, 0.02);
}

[data-theme="light"] .mobile-contact-card.archived:hover {
  background-color: var(--hover-bg);
}

/* WhatsApp-style unread badge positioned below time */
.unread-badge-whatsapp-positioned {
  background-color: #ffffff;
  color: #000000;
  font-size: 11px;
  font-weight: 600;
  min-width: 18px;
  height: 18px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 4px;
  box-sizing: border-box;
  line-height: 1;
  z-index: 1;
}

/* Light theme support for unread badge */
[data-theme="light"] .unread-badge-whatsapp-positioned {
  background-color: #ffffff;
  color: #000000;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

/* Sidebar unread count badges */
.sidebar-unread-badge {
  position: absolute;
  top: -4px;
  right: -4px;
  background-color: #ef4444; /* Red background */
  color: #ffffff;
  font-size: 12px;
  font-weight: 700;
  min-width: 20px;
  height: 20px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 3px;
  box-sizing: border-box;
  line-height: 1;
  z-index: 10;
  border: 2px solid var(--bg-primary);
}

/* Light theme support for sidebar badges */
[data-theme="light"] .sidebar-unread-badge {
  background-color: #ef4444;
  color: #ffffff;
  border-color: var(--bg-primary);
}

/* Contact card padding override - make cards thinner */
.contact-card-compact {
  padding: 12px 16px !important; /* Reduced from default p-4 (16px) */
}

/* Ensure proper spacing in contact card content */
.contact-card-compact .flex.items-center.space-x-3 > * + * {
  margin-left: 12px; /* Slightly reduced spacing */
}

/* Reduce vertical spacing in contact cards */
.contact-card-compact .flex-1.min-w-0 > * + * {
  margin-top: 3px !important; /* Tiny bit more spacing for read messages */
}

/* Remove default paragraph margins in contact cards */
.contact-card-compact .flex-1.min-w-0 p {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}

/* Ensure the header div and message paragraphs have no spacing */
.contact-card-compact .flex-1.min-w-0 > div + p {
  margin-top: 0 !important;
}

/* Specific class for contact message paragraphs - zero margins */
.contact-message-tight {
  margin: 0 !important;
  padding: 0 !important;
  line-height: 1.2 !important;
}

/* Additional override for flex containers in contact cards */
.contact-card-compact .flex-1.min-w-0 {
  display: flex;
  flex-direction: column;
  gap: 0 !important;
}

/* Override any default spacing between elements */
.contact-card-compact .flex-1.min-w-0 > * {
  margin: 0 !important;
}
/* Forward Message Modal Styles */
.forward-modal {
  backdrop-filter: blur(8px);
}

.forward-modal .modal-content {
  animation: modalSlideIn 0.3s ease-out;
}

@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.forward-chat-item:hover {
  transform: translateX(2px);
}

.forward-chat-item {
  transition: all 0.2s ease;
}

/* Forward modal scrollbar */
.forward-modal .overflow-y-auto::-webkit-scrollbar {
  width: 6px;
}

.forward-modal .overflow-y-auto::-webkit-scrollbar-track {
  background: transparent;
}

.forward-modal .overflow-y-auto::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

.forward-modal .overflow-y-auto::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}
/* Forwarded message styling */
.message-content em {
  color: #9ca3af;
  font-style: italic;
  font-size: 0.875rem;
  opacity: 0.8;
}

/* Enhanced empty state styling for forward modal */
.forward-empty-state {
  animation: fadeInUp 0.4s ease-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.forward-empty-state button:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Mobile Settings Scrollable Container - FORCED SCROLLBAR */
@media (max-width: 767px) {
  .mobile-settings-scrollable {
    flex: 1;
    overflow-y: scroll !important; /* Force scroll */
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    min-height: 0; /* Important for flex children */
    max-height: 100%;
  }
  
  /* Inner content wrapper to ensure scrollable height */
  .mobile-settings-scrollable > div {
    min-height: calc(100vh - 120px); /* Ensure content is taller than viewport */
    padding-bottom: 80px !important; /* Extra padding to ensure scrollability */
  }
  
  /* FORCE scrollbar to always be visible */
  .mobile-settings-scrollable::-webkit-scrollbar {
    width: 8px !important;
    display: block !important;
  }
  
  .mobile-settings-scrollable::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05) !important;
    border-radius: 4px;
  }
  
  .mobile-settings-scrollable::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3) !important;
    border-radius: 4px;
  }
  
  .mobile-settings-scrollable::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5) !important;
  }
}

